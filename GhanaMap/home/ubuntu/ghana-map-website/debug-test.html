<!DOCTYPE html>
<html>
<head>
    <title>Debug Test - PowerGridX</title>
    <style>
        body { margin: 0; font-family: Arial, sans-serif; }
        .header { background: #333; color: white; padding: 10px; }
        .nav-btn { background: #555; color: white; border: none; padding: 10px 20px; margin: 5px; cursor: pointer; }
        .nav-btn.active { background: #F97316; }
        .main-content { position: relative; height: calc(100vh - 60px); overflow: hidden; }
        
        .view-container {
            position: absolute;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: white;
            display: none;
            opacity: 0;
            visibility: hidden;
            z-index: -1;
        }
        
        .view-container.active {
            display: block !important;
            opacity: 1 !important;
            visibility: visible !important;
            z-index: 10 !important;
        }
        
        .test-content { padding: 50px; font-size: 18px; }
        #audit-view { background: #fff3e0; }
        #grid-view { background: #f3e5f5; display: flex; }
        
        .fake-map { width: 70%; height: 100%; background: #333; color: white; display: flex; align-items: center; justify-content: center; }
        .fake-sidebar { width: 30%; height: 100%; background: #555; color: white; padding: 20px; box-sizing: border-box; }
        
        .audit-container { padding: 20px; height: 100%; overflow-y: auto; }
        .audit-header { background: white; padding: 20px; margin-bottom: 20px; border-radius: 8px; }
        .audit-content { background: white; padding: 20px; border-radius: 8px; }
    </style>
</head>
<body>
    <div class="header">
        <button class="nav-btn" onclick="showView('grid')">Smart Grid (Test Map)</button>
        <button class="nav-btn" onclick="showView('audit')">Audit Log (Test Content)</button>
        <span style="margin-left: 20px; color: #ccc;">Debug Test Page</span>
    </div>
    
    <div class="main-content">
        <div id="grid-view" class="view-container">
            <div class="fake-map">
                <div style="text-align: center;">
                    <h2>FAKE GHANA MAP</h2>
                    <p>This should only show in Smart Grid view</p>
                    <p>No flashing or bleeding to other views</p>
                </div>
            </div>
            <div class="fake-sidebar">
                <h3>Sidebar</h3>
                <p>Map sidebar content</p>
                <p>Should be isolated to this view only</p>
            </div>
        </div>
        
        <div id="audit-view" class="view-container">
            <div class="audit-container">
                <div class="audit-header">
                    <h2>Audit Log</h2>
                    <p>This content should show when Audit button is clicked</p>
                </div>
                <div class="audit-content">
                    <h3>Test Audit Entries</h3>
                    <div style="padding: 10px; margin: 10px 0; background: #fef2f2; border-left: 4px solid #ef4444;">
                        <strong>CRITICAL:</strong> Test critical event
                    </div>
                    <div style="padding: 10px; margin: 10px 0; background: #f0fdf4; border-left: 4px solid #10b981;">
                        <strong>MAINTENANCE:</strong> Test maintenance event
                    </div>
                    <div style="padding: 10px; margin: 10px 0; background: #eff6ff; border-left: 4px solid #3b82f6;">
                        <strong>INSTALLATION:</strong> Test installation event
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentView = null;
        
        function showView(viewName) {
            console.log('DEBUG: Switching to:', viewName);
            
            // Update navigation
            document.querySelectorAll('.nav-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            // Hide all views completely
            document.querySelectorAll('.view-container').forEach(view => {
                view.classList.remove('active');
                view.style.display = 'none';
                view.style.opacity = '0';
                view.style.visibility = 'hidden';
                view.style.zIndex = '-1';
            });
            
            // Show target view after brief delay
            setTimeout(() => {
                const targetView = document.getElementById(viewName + '-view');
                if (targetView) {
                    targetView.style.display = 'block';
                    targetView.style.opacity = '1';
                    targetView.style.visibility = 'visible';
                    targetView.style.zIndex = '10';
                    targetView.classList.add('active');
                    
                    console.log('DEBUG: Successfully switched to:', viewName);
                    console.log('DEBUG: Target view element:', targetView);
                    console.log('DEBUG: Target view display:', targetView.style.display);
                } else {
                    console.error('DEBUG: Target view not found:', viewName + '-view');
                }
                
                currentView = viewName;
            }, 50);
        }
        
        // Test both views on load
        document.addEventListener('DOMContentLoaded', function() {
            console.log('DEBUG: Page loaded, testing views...');
            
            // Test audit view first
            setTimeout(() => {
                console.log('DEBUG: Testing audit view...');
                showView('audit');
            }, 1000);
            
            // Then test grid view
            setTimeout(() => {
                console.log('DEBUG: Testing grid view...');
                showView('grid');
            }, 3000);
        });
    </script>
</body>
</html>