<!-- PowerGridX Header Component -->
<header class="bg-slate-700 shadow-sm">
    <!-- Top Navigation Bar -->
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex justify-between items-center h-16">
            <!-- Logo and Title -->
            <div class="flex items-center space-x-4">
                <div class="flex items-center space-x-3">
                    <div class="w-8 h-8 bg-gradient-to-br from-orange-500 to-red-600 rounded-lg flex items-center justify-center">
                        <span class="text-white font-bold text-sm">⚡</span>
                    </div>
                    <div>
                        <h1 class="text-xl font-bold text-white">PowerGridX</h1>
                        <p class="text-xs text-gray-300">Smart Infrastructure Platform</p>
                    </div>
                </div>
            </div>

            <!-- Navigation Buttons -->
            <nav class="hidden md:flex space-x-1">
                <a href="index.html" id="nav-dashboard" class="bg-slate-600 hover:bg-slate-500 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors">
                    Dashboard
                </a>
                <a href="smart-grid.html" id="nav-smart-grid" class="bg-slate-600 hover:bg-slate-500 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors">
                    Smart Grid Management
                </a>
                <a href="transformers.html" id="nav-transformers" class="bg-slate-600 hover:bg-slate-500 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors">
                    Transformers
                </a>
                <a href="audit-log.html" id="nav-audit" class="bg-orange-500 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors">
                    Audit Log
                </a>
                <a href="dispatch.html" id="nav-dispatch" class="bg-slate-600 hover:bg-slate-500 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors">
                    Dispatch Request
                </a>
            </nav>

            <!-- Status -->
            <div class="flex items-center space-x-4">
                <div class="text-sm text-gray-300">
                    Last updated: <span id="last-update">7:22:59 PM</span>
                </div>
                <div class="flex items-center space-x-2">
                    <span class="w-2 h-2 bg-green-500 rounded-full pulse-dot"></span>
                    <span class="text-sm text-gray-300">Cloud Connected • Live Data</span>
                </div>
            </div>
        </div>
    </div>


</header>

<script>
// Header functionality
document.addEventListener('DOMContentLoaded', function() {
    // Update active navigation based on current page
    const currentPage = window.location.pathname.split('/').pop() || 'index.html';
    const navButtons = document.querySelectorAll('.nav-btn');
    
    // Remove active class from all nav items
    document.querySelectorAll('nav a').forEach(btn => {
        btn.classList.remove('bg-orange-500');
        btn.classList.add('bg-slate-600', 'hover:bg-slate-500');
    });

    // Add active class to current page nav item
    let activeNavId = '';
    switch(currentPage) {
        case 'index.html':
        case '':
            activeNavId = 'nav-dashboard';
            break;
        case 'smart-grid.html':
            activeNavId = 'nav-smart-grid';
            break;
        case 'transformers.html':
            activeNavId = 'nav-transformers';
            break;
        case 'audit-log.html':
            activeNavId = 'nav-audit';
            break;
        case 'dispatch.html':
            activeNavId = 'nav-dispatch';
            break;
    }

    if (activeNavId) {
        const activeNav = document.getElementById(activeNavId);
        if (activeNav) {
            activeNav.classList.remove('bg-slate-600', 'hover:bg-slate-500');
            activeNav.classList.add('bg-orange-500');
        }
    }
    
    // Update timestamp every minute
    function updateTimestamp() {
        const now = new Date();
        const timeString = now.toLocaleTimeString('en-US', { 
            hour: 'numeric', 
            minute: '2-digit',
            hour12: true 
        });
        const timestampEl = document.getElementById('last-updated');
        if (timestampEl) {
            timestampEl.textContent = timeString;
        }
    }
    
    updateTimestamp();
    setInterval(updateTimestamp, 60000); // Update every minute
    
    // Simulate live meter count updates
    function updateMeterCount() {
        const metersEl = document.getElementById('meters-online');
        if (metersEl) {
            const currentCount = parseInt(metersEl.textContent.replace(',', ''));
            const variation = Math.floor(Math.random() * 10) - 5; // ±5 variation
            const newCount = Math.max(1200, currentCount + variation);
            metersEl.textContent = newCount.toLocaleString();
        }
    }
    
    setInterval(updateMeterCount, 30000); // Update every 30 seconds
});
</script>
