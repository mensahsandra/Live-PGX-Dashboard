<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PowerGridX Dashboard - Smart Infrastructure for Africa</title>
    <link rel="icon" href="favicon/favicon.svg" type="image/svg+xml">
    <!-- Updated: Enhanced dashboard with Chart.js, live notifications, and improved UX -->
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        'sans': ['Inter', 'ui-sans-serif', 'system-ui'],
                    },
                    colors: {
                        'pgx-green': '#10b981',
                        'pgx-blue': '#3b82f6',
                        'pgx-gray': '#f8fafc',
                    }
                }
            }
        }
    </script>
    
    <!-- Custom Tailwind Config -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'pgx-orange': '#FF6B00',
                        'pgx-orange-light': '#FF8533',
                        'pgx-orange-dark': '#E55A00',
                        'pgx-blue': '#3B82F6',
                        'pgx-green': '#10B981',
                        'pgx-red': '#EF4444',
                        'pgx-yellow': '#F59E0B'
                    }
                }
            }
        }
    </script>
    
    <style>
        /* Energy-themed animations and effects */

        /* Logo glow effect */
        @keyframes energy-glow {
            0%, 100% {
                box-shadow: 0 0 10px rgba(249, 115, 22, 0.5), 0 0 20px rgba(249, 115, 22, 0.3), 0 0 30px rgba(249, 115, 22, 0.1);
            }
            50% {
                box-shadow: 0 0 15px rgba(249, 115, 22, 0.8), 0 0 30px rgba(249, 115, 22, 0.5), 0 0 45px rgba(249, 115, 22, 0.2);
            }
        }

        .logo-glow {
            animation: energy-glow 3s ease-in-out infinite;
        }

        /* Energy pulse for lightning bolt */
        @keyframes energy-pulse {
            0%, 100% {
                transform: scale(1);
                filter: brightness(1);
            }
            50% {
                transform: scale(1.1);
                filter: brightness(1.3);
            }
        }

        .energy-pulse {
            animation: energy-pulse 2s ease-in-out infinite;
        }

        /* Heartbeat pulse for live indicator */
        @keyframes heartbeat {
            0%, 100% {
                transform: scale(1);
                opacity: 1;
            }
            25% {
                transform: scale(1.2);
                opacity: 0.8;
            }
            50% {
                transform: scale(1);
                opacity: 1;
            }
            75% {
                transform: scale(1.1);
                opacity: 0.9;
            }
        }

        .heartbeat-pulse {
            animation: heartbeat 2s ease-in-out infinite;
            box-shadow: 0 0 10px rgba(34, 197, 94, 0.6);
        }

        /* Live data text pulse */
        @keyframes text-pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        .live-text {
            animation: text-pulse 3s ease-in-out infinite;
        }

        /* Navigation button hover effects */
        .nav-btn {
            position: relative;
            overflow: hidden;
        }

        .nav-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }

        .nav-btn:hover::before {
            left: 100%;
        }

        .nav-btn:hover {
            box-shadow: 0 0 15px rgba(249, 115, 22, 0.4);
            border: 1px solid rgba(249, 115, 22, 0.3);
        }

        .nav-btn.active {
            background: linear-gradient(135deg, #f97316, #ea580c) !important;
            box-shadow: 0 0 20px rgba(249, 115, 22, 0.6);
            border: 1px solid rgba(249, 115, 22, 0.5);
        }

        /* Theme toggle animations */
        @keyframes theme-rotate {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .theme-btn:hover .theme-icon {
            animation: theme-rotate 0.8s ease-in-out;
        }

        .theme-btn {
            position: relative;
            overflow: hidden;
        }

        .theme-btn::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: radial-gradient(circle, rgba(249, 115, 22, 0.3), transparent);
            transition: all 0.3s ease;
            border-radius: 50%;
            transform: translate(-50%, -50%);
        }

        .theme-btn:hover::after {
            width: 40px;
            height: 40px;
        }

        /* Logo container hover effect */
        .logo-container:hover .brand-text h1 {
            text-shadow: 0 0 10px rgba(249, 115, 22, 0.5);
        }

        /* Status container hover effect */
        .status-container:hover {
            transform: translateY(-1px);
            transition: transform 0.2s ease;
        }

        /* Dark theme styles */
        .dark-theme {
            background: linear-gradient(135deg, #1e293b, #334155) !important;
        }

        .dark-theme .nav-btn {
            background: #475569 !important;
        }

        .dark-theme .nav-btn:hover {
            background: #64748b !important;
        }

        /* Microinteraction ripple effect */
        @keyframes ripple {
            0% {
                transform: scale(0);
                opacity: 1;
            }
            100% {
                transform: scale(4);
                opacity: 0;
            }
        }

        .ripple-effect {
            position: relative;
            overflow: hidden;
        }

        .ripple-effect::after {
            content: '';
            position: absolute;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.6);
            transform: scale(0);
            animation: ripple 0.6s linear;
            pointer-events: none;
        }

        /* Smooth transitions for all interactive elements */
        .nav-btn, .theme-btn, .logo-container, .status-container {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* Glow effect for active elements */
        .glow-active {
            box-shadow: 0 0 20px rgba(249, 115, 22, 0.6), 0 0 40px rgba(249, 115, 22, 0.4);
        }
        
        /* Custom scrollbar */
        .custom-scrollbar::-webkit-scrollbar {
            width: 6px;
        }
        
        .custom-scrollbar::-webkit-scrollbar-track {
            background: #f1f5f9;
        }
        
        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: #FF6B00;
            border-radius: 3px;
        }
        
        /* Card hover effects */
        .metric-card {
            transition: all 0.3s ease;
        }
        
        .metric-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }
        
        /* Navigation active state */
        .nav-active {
            background-color: #FF6B00 !important;
            color: white !important;
        }
        
        .nav-inactive {
            background-color: #64748b;
            color: white;
        }
        
        .nav-inactive:hover {
            background-color: #475569;
        }

        /* Enhanced navigation styles */
        .nav-btn {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .nav-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }

        .nav-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }

        .nav-btn:hover::before {
            left: 100%;
        }

        /* Heartbeat animation */
        @keyframes heartbeat {
            0%, 100% { transform: scale(1); opacity: 1; }
            25% { transform: scale(1.1); opacity: 0.8; }
            50% { transform: scale(1); opacity: 1; }
            75% { transform: scale(1.05); opacity: 0.9; }
        }

        .heartbeat {
            animation: heartbeat 2s ease-in-out infinite;
        }

        /* Profile dropdown */
        .profile-dropdown {
            transform: translateY(-10px) scale(0.95);
            opacity: 0;
            transition: all 0.2s ease-out;
        }

        .profile-dropdown.show {
            transform: translateY(0) scale(1);
            opacity: 1;
        }

        /* Dark mode styles */
        .dark-mode {
            background-color: #1a1a1a !important;
            color: #e5e5e5 !important;
        }

        .dark-mode header {
            background-color: #2d3748 !important;
        }

        .dark-mode .bg-white {
            background-color: #2d3748 !important;
            color: #e5e5e5 !important;
        }

        .dark-mode .bg-gray-50 {
            background-color: #1a1a1a !important;
        }

        .dark-mode .text-gray-900 {
            color: #e5e5e5 !important;
        }

        .dark-mode .text-gray-600 {
            color: #a0a0a0 !important;
        }

        .dark-mode .text-gray-500 {
            color: #888888 !important;
        }

        .dark-mode .border-gray-200 {
            border-color: #4a5568 !important;
        }

        .dark-mode .border-gray-300 {
            border-color: #4a5568 !important;
        }

        .dark-mode .bg-slate-700 {
            background-color: #1a202c !important;
        }

        .dark-mode .bg-slate-600 {
            background-color: #2d3748 !important;
        }

        .dark-mode .bg-slate-500 {
            background-color: #4a5568 !important;
        }

        .dark-mode input, .dark-mode select, .dark-mode textarea {
            background-color: #2d3748 !important;
            color: #e5e5e5 !important;
            border-color: #4a5568 !important;
        }

        .dark-mode .shadow-sm, .dark-mode .shadow-lg, .dark-mode .shadow-xl {
            box-shadow: 0 0 0 1px rgba(255, 255, 255, 0.1) !important;
        }

        /* Custom Animations */
        @keyframes pulse-soft {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        @keyframes slide-up {
            from { transform: translateY(20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        @keyframes fade-in {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .pulse-soft { animation: pulse-soft 2s infinite; }
        .slide-up { animation: slide-up 0.5s ease-out; }
        .fade-in { animation: fade-in 0.3s ease-out; }

        /* Card Hover Effects */
        .card-hover {
            transition: all 0.3s ease;
        }

        .card-hover:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }

        /* Chart Container */
        .chart-container {
            position: relative;
            height: 300px;
            margin: 1rem 0;
        }

        /* Notification Styles */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            max-width: 350px;
            min-width: 300px;
            transform: translateX(100%);
            transition: transform 0.3s ease;
        }

        .notification.show {
            transform: translateX(0);
        }

        /* Light Alert Styles */
        .light-alert {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border: 1px solid #e5e7eb;
            border-radius: 6px;
            padding: 8px 12px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            font-size: 13px;
            line-height: 1.3;
            max-width: 280px;
        }

        .alert-indicator {
            position: fixed;
            top: 80px;
            right: 20px;
            z-index: 999;
            background: #ef4444;
            color: white;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: bold;
            animation: pulse-alert 2s infinite;
            cursor: pointer;
        }

        @keyframes pulse-alert {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.1); opacity: 0.8; }
        }

        /* Heartbeat animation for districts */
        @keyframes heartbeat {
            0%, 100% { transform: scale(1); }
            25% { transform: scale(1.1); }
            50% { transform: scale(1); }
            75% { transform: scale(1.05); }
        }

        .heartbeat {
            animation: heartbeat 2s infinite;
        }

        /* Profile dropdown animation */
        .profile-dropdown {
            opacity: 0;
            transform: translateY(-10px);
            transition: all 0.2s ease-in-out;
        }

        .profile-dropdown.show {
            opacity: 1;
            transform: translateY(0);
        }

        /* Futuristic Control Cards */
        .control-card {
            position: relative;
            overflow: hidden;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }

        .control-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }

        .control-card:hover::before {
            left: 100%;
        }

        .control-card:hover {
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.4);
            transform: translateY(-5px) scale(1.02);
        }

        /* Glowing effect for status indicators */
        @keyframes glow {
            0%, 100% { box-shadow: 0 0 5px currentColor; }
            50% { box-shadow: 0 0 20px currentColor, 0 0 30px currentColor; }
        }

        .animate-pulse {
            animation: glow 2s ease-in-out infinite;
        }

        /* Backdrop blur for glass effect */
        .backdrop-blur-sm {
            backdrop-filter: blur(4px);
        }

        /* Dark mode support */
        .dark-mode {
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #0f172a 100%);
        }

        .dark-mode .bg-white {
            background-color: #1e293b !important;
        }

        .dark-mode .text-gray-900 {
            color: #f1f5f9 !important;
        }

        .dark-mode .text-gray-600 {
            color: #cbd5e1 !important;
        }

        .dark-mode .border-gray-200 {
            border-color: #475569 !important;
        }

        /* Loading Spinner */
        .spinner {
            border: 2px solid #f3f3f3;
            border-top: 2px solid #3b82f6;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Better spacing */
        .dashboard-section {
            margin-bottom: 2rem;
        }

        .metric-card {
            padding: 1.5rem;
            border-radius: 12px;
            background: white;
            border: 1px solid #e5e7eb;
            transition: all 0.3s ease;
        }

        .metric-card:hover {
            border-color: #3b82f6;
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.1);
        }
    </style>
</head>
<body class="bg-gray-50 font-sans">
    <!-- Navigation Header -->
    <header class="bg-slate-700 shadow-lg fixed top-0 left-0 right-0 z-40">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <!-- Logo and Title -->
                <div class="flex items-center space-x-3">
                    <div class="w-8 h-8 rounded-lg overflow-hidden">
                        <video autoplay loop muted class="w-full h-full object-cover">
                            <source src="PGXLogo.webm" type="video/webm">
                            <!-- Fallback for browsers that don't support video -->
                            <div class="w-8 h-8 bg-gradient-to-br from-orange-500 to-red-600 rounded-lg flex items-center justify-center">
                                <span class="text-white font-bold">⚡</span>
                            </div>
                        </video>
                    </div>
                    <div>
                        <h1 class="text-xl font-bold text-white">
                            PowerGridX
                        </h1>
                        <p class="text-xs text-gray-300">Smart Infrastructure Platform</p>
                    </div>
                </div>

                <!-- Navigation -->
                <nav class="hidden lg:flex items-center space-x-2">
                    <a href="index.html" class="nav-btn bg-orange-500 text-white px-3 py-2 rounded-lg text-xs font-medium">
                        Dashboard
                    </a>
                    <a href="smart-grid.html" class="nav-btn bg-slate-600 hover:bg-slate-500 text-white px-3 py-2 rounded-lg text-xs font-medium transition-all duration-300">
                        Smart Grid
                    </a>
                    <a href="transformers.html" class="nav-btn bg-slate-600 hover:bg-slate-500 text-white px-3 py-2 rounded-lg text-xs font-medium transition-all duration-300">
                        Transformers
                    </a>
                    <a href="audit-log.html" class="nav-btn bg-slate-600 hover:bg-slate-500 text-white px-3 py-2 rounded-lg text-xs font-medium transition-all duration-300">
                        Audit Log
                    </a>
                    <a href="dispatch.html" class="nav-btn bg-slate-600 hover:bg-slate-500 text-white px-3 py-2 rounded-lg text-xs font-medium transition-all duration-300">
                        Dispatch
                    </a>
                    <a href="notifications.html" class="nav-btn bg-slate-600 hover:bg-slate-500 text-white px-3 py-2 rounded-lg text-xs font-medium relative transition-all duration-300">
                        Notifications
                        <span id="notification-badge" class="absolute -top-1 -right-1 w-4 h-4 bg-green-500 text-white text-xs rounded-full flex items-center justify-center hidden">0</span>
                    </a>
                    <a href="history.html" class="nav-btn bg-slate-600 hover:bg-slate-500 text-white px-3 py-2 rounded-lg text-xs font-medium transition-all duration-300">
                        History
                    </a>
                </nav>

                <!-- Right Side Controls -->
                <div class="flex items-center space-x-4">
                    <!-- Theme Toggle -->
                    <button id="theme-toggle" class="w-8 h-8 bg-slate-600 hover:bg-slate-500 rounded-lg flex items-center justify-center transition-all duration-300 hover:scale-110">
                        <span class="text-yellow-400 text-sm">☀️</span>
                    </button>

                    <!-- Status -->
                    <div class="flex items-center space-x-2">
                        <span class="w-2 h-2 bg-green-500 rounded-full heartbeat"></span>
                        <span class="text-sm text-gray-300">Cloud Connected • Live Data</span>
                    </div>

                    <!-- Profile -->
                    <div class="relative">
                        <button id="profile-toggle" class="flex items-center space-x-2 bg-slate-600 hover:bg-slate-500 px-3 py-2 rounded-lg transition-all duration-300">
                            <div class="w-6 h-6 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center">
                                <span class="text-white text-xs font-bold">A</span>
                            </div>
                            <span class="text-white text-sm">Admin</span>
                            <svg class="w-4 h-4 text-gray-300 transition-transform duration-200" id="profile-arrow" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                            </svg>
                        </button>

                        <!-- Profile Dropdown -->
                        <div id="profile-dropdown" class="profile-dropdown absolute right-0 mt-2 w-80 bg-white rounded-lg shadow-xl border border-gray-200 hidden z-50">
                            <div class="p-4 border-b border-gray-200">
                                <div class="flex items-center space-x-3">
                                    <div class="w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center">
                                        <span class="text-white text-lg font-bold">A</span>
                                    </div>
                                    <div>
                                        <h3 class="font-semibold text-gray-900">Administrator</h3>
                                        <p class="text-sm text-gray-500">ADM-001</p>
                                    </div>
                                </div>
                            </div>

                            <div class="p-4 space-y-3">
                                <div class="grid grid-cols-2 gap-4 text-sm">
                                    <div>
                                        <span class="text-gray-500">Role:</span>
                                        <p class="font-medium">Super Admin</p>
                                    </div>
                                    <div>
                                        <span class="text-gray-500">Login Time:</span>
                                        <p class="font-medium">5:43:20 AM</p>
                                    </div>
                                    <div>
                                        <span class="text-gray-500">Last Logout:</span>
                                        <p class="font-medium">Yesterday 11:30 PM</p>
                                    </div>
                                    <div>
                                        <span class="text-gray-500">Session:</span>
                                        <p class="font-medium text-green-600">Active</p>
                                    </div>
                                </div>

                                <div class="border-t pt-3">
                                    <h4 class="text-sm font-medium text-gray-900 mb-2">Access Control</h4>
                                    <div class="grid grid-cols-2 gap-2 text-xs">
                                        <div class="flex items-center space-x-1">
                                            <span class="w-2 h-2 bg-green-500 rounded-full"></span>
                                            <span>Full System Access</span>
                                        </div>
                                        <div class="flex items-center space-x-1">
                                            <span class="w-2 h-2 bg-green-500 rounded-full"></span>
                                            <span>User Management</span>
                                        </div>
                                        <div class="flex items-center space-x-1">
                                            <span class="w-2 h-2 bg-green-500 rounded-full"></span>
                                            <span>Grid Control</span>
                                        </div>
                                        <div class="flex items-center space-x-1">
                                            <span class="w-2 h-2 bg-green-500 rounded-full"></span>
                                            <span>Audit Logs</span>
                                        </div>
                                    </div>
                                </div>

                                <button class="w-full bg-red-500 hover:bg-red-600 text-white py-2 px-4 rounded-lg text-sm font-medium transition-colors">
                                    Sign Out
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Notification Container -->
    <div id="notification-container" style="position: fixed; top: 70px; right: 280px; z-index: 1000; max-width: 350px;"></div>

    <!-- Main Content -->
    <div class="min-h-screen bg-gray-50 pt-16">
        <!-- Main Content Area -->
        <main class="max-w-7xl mx-auto px-6 py-8">
            <!-- Main Header Section -->
            <div class="mb-8">
                <div class="flex items-center justify-between">
                    <div>
                        <h1 class="text-3xl font-bold text-gray-900 mb-2">Regional Infrastructure Overview</h1>
                        <p class="text-gray-600">Select a region to view detailed infrastructure data</p>
                    </div>
                    <div class="flex items-center space-x-3">
                        <label class="text-sm font-medium text-gray-700">Region:</label>
                        <select id="dashboard-region-selector" class="border border-gray-300 rounded-lg px-4 py-2 text-sm font-medium bg-white text-gray-900 hover:border-blue-500 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500" onchange="updateDashboardRegion()">
                            <option value="ashanti">Ashanti Region</option>
                            <option value="greater-accra">Greater Accra</option>
                            <option value="western">Western Region</option>
                            <option value="central">Central Region</option>
                            <option value="northern">Northern Region</option>
                            <option value="eastern">Eastern Region</option>
                            <option value="upper-east">Upper East</option>
                            <option value="upper-west">Upper West</option>
                            <option value="volta">Volta Region</option>
                            <option value="brong-ahafo">Brong Ahafo</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- Key Metrics Cards -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                <!-- Total Energy Tracked -->
                <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow cursor-pointer" onclick="showEnergyDetails()">
                    <div class="flex items-center justify-between mb-4">
                        <div class="w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center">
                            <svg class="w-6 h-6 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                            </svg>
                        </div>
                        <div class="text-right">
                            <div class="text-2xl font-bold text-gray-900" id="total-energy-value">1,922.1</div>
                            <div class="text-sm text-gray-500">kWh</div>
                        </div>
                    </div>
                    <h3 class="text-lg font-semibold text-gray-900 mb-2">Total Energy Tracked</h3>
                    <div class="flex items-center text-sm">
                        <svg class="w-4 h-4 text-green-500 mr-1" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M5.293 9.707a1 1 0 010-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 01-1.414 1.414L11 7.414V15a1 1 0 11-2 0V7.414L6.707 9.707a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                        </svg>
                        <span class="text-green-600 font-medium">+2.1% from last hour</span>
                    </div>
                </div>

                <!-- Transmission Efficiency -->
                <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow cursor-pointer" onclick="showTransmissionDetails()">
                    <div class="flex items-center justify-between mb-4">
                        <div class="w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center">
                            <svg class="w-6 h-6 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
                            </svg>
                        </div>
                        <div class="text-right">
                            <div class="text-2xl font-bold text-gray-900" id="transmission-efficiency">98.5</div>
                            <div class="text-sm text-gray-500">%</div>
                        </div>
                    </div>
                    <h3 class="text-lg font-semibold text-gray-900 mb-2">Transmission Efficiency</h3>
                    <div class="flex items-center text-sm">
                        <svg class="w-4 h-4 text-green-500 mr-1" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M5.293 9.707a1 1 0 010-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 01-1.414 1.414L11 7.414V15a1 1 0 11-2 0V7.414L6.707 9.707a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                        </svg>
                        <span class="text-green-600 font-medium">+0.3% from last hour</span>
                    </div>
                </div>

                <!-- Active Transformers -->
                <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow cursor-pointer" onclick="showTransformerDetails()">
                    <div class="flex items-center justify-between mb-4">
                        <div class="w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center">
                            <svg class="w-6 h-6 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path>
                            </svg>
                        </div>
                        <div class="text-right">
                            <div class="text-2xl font-bold text-gray-900" id="active-transformers">77</div>
                            <div class="text-sm text-gray-500">units</div>
                        </div>
                    </div>
                    <h3 class="text-lg font-semibold text-gray-900 mb-2">Active Transformers</h3>
                    <div class="flex items-center text-sm">
                        <div class="w-2 h-2 bg-green-500 rounded-full mr-2"></div>
                        <span class="text-gray-600">72 online, 5 maintenance</span>
                    </div>
                </div>

                <!-- Energy Theft Detected -->
                <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow cursor-pointer" onclick="showTheftDetails()">
                    <div class="flex items-center justify-between mb-4">
                        <div class="w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center">
                            <svg class="w-6 h-6 text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.464 0L4.35 16.5c-.77.833.192 2.5 1.732 2.5z"></path>
                            </svg>
                        </div>
                        <div class="text-right">
                            <div class="text-2xl font-bold text-gray-900" id="energy-theft">12.5</div>
                            <div class="text-sm text-gray-500">%</div>
                        </div>
                    </div>
                    <h3 class="text-lg font-semibold text-gray-900 mb-2">Energy Theft Detected</h3>
                    <div class="flex items-center text-sm">
                        <svg class="w-4 h-4 text-red-500 mr-1" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M14.707 10.293a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 111.414-1.414L9 12.586V5a1 1 0 012 0v7.586l2.293-2.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                        </svg>
                        <span class="text-red-600 font-medium">-0.8% from last hour</span>
                    </div>
                </div>
            </div>

            <!-- Additional Metrics Grid -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8">
                <!-- Active Smart Nodes -->
                <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow cursor-pointer" onclick="showSmartNodesDetails()">
                    <div class="flex items-center justify-between mb-4">
                        <div class="w-12 h-12 bg-indigo-100 rounded-lg flex items-center justify-center">
                            <svg class="w-6 h-6 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path>
                            </svg>
                        </div>
                        <div class="text-right">
                            <div class="text-2xl font-bold text-gray-900" id="smart-nodes-percentage">89</div>
                            <div class="text-sm text-gray-500">%</div>
                        </div>
                    </div>
                    <h3 class="text-lg font-semibold text-gray-900 mb-2">Active Smart Nodes</h3>
                    <div class="flex items-center text-sm">
                        <div class="w-2 h-2 bg-indigo-500 rounded-full mr-2"></div>
                        <span class="text-gray-600" id="smart-nodes-status">156 of 175 nodes active</span>
                    </div>
                </div>

                <!-- Meter Connectivity -->
                <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow cursor-pointer" onclick="showMeterConnectivityDetails()">
                    <div class="flex items-center justify-between mb-4">
                        <div class="w-12 h-12 bg-teal-100 rounded-lg flex items-center justify-center">
                            <svg class="w-6 h-6 text-teal-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.111 16.404a5.5 5.5 0 017.778 0M12 20h.01m-7.08-7.071c3.904-3.905 10.236-3.905 14.141 0M1.394 9.393c5.857-5.857 15.355-5.857 21.213 0"></path>
                            </svg>
                        </div>
                        <div class="text-right">
                            <div class="text-2xl font-bold text-gray-900" id="meter-connectivity-percentage">97</div>
                            <div class="text-sm text-gray-500">%</div>
                        </div>
                    </div>
                    <h3 class="text-lg font-semibold text-gray-900 mb-2">Meter Connectivity</h3>
                    <div class="flex items-center text-sm">
                        <div class="w-2 h-2 bg-teal-500 rounded-full mr-2"></div>
                        <span class="text-gray-600" id="meter-connectivity-status">14,357 of 14,801 meters connected</span>
                    </div>
                </div>

                <!-- Network Coverage -->
                <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow cursor-pointer" onclick="showNetworkCoverageDetails()">
                    <div class="flex items-center justify-between mb-4">
                        <div class="w-12 h-12 bg-emerald-100 rounded-lg flex items-center justify-center">
                            <svg class="w-6 h-6 text-emerald-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                        <div class="text-right">
                            <div class="text-2xl font-bold text-gray-900" id="network-coverage-percentage">94</div>
                            <div class="text-sm text-gray-500">%</div>
                        </div>
                    </div>
                    <h3 class="text-lg font-semibold text-gray-900 mb-2">Network Coverage</h3>
                    <div class="flex items-center text-sm">
                        <div class="w-2 h-2 bg-emerald-500 rounded-full mr-2"></div>
                        <span class="text-gray-600" id="network-coverage-region">Ashanti Region</span>
                    </div>
                    <div class="mt-3 space-y-1 text-xs">
                        <div class="flex justify-between">
                            <span class="text-gray-500">Urban:</span>
                            <span class="font-semibold text-gray-700" id="urban-coverage">98%</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-500">Rural:</span>
                            <span class="font-semibold text-gray-700" id="rural-coverage">87%</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-500">Peri-Urban:</span>
                            <span class="font-semibold text-gray-700" id="peri-urban-coverage">92%</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- LoRaWAN Infrastructure Section -->
            <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-8 mb-8">
                <div class="flex items-center justify-between mb-6">
                    <div>
                        <h2 class="text-2xl font-bold text-gray-900 mb-2">LoRaWAN Infrastructure</h2>
                        <p class="text-gray-600">IoT network monitoring and smart grid connectivity</p>
                    </div>
                    <button class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors" onclick="showAllLoRaWANDetails()">
                        View All
                    </button>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                    <!-- LoRaWAN Base Stations -->
                    <div class="bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl p-6 hover:shadow-md transition-shadow cursor-pointer" onclick="showBaseStationsDetails()">
                        <div class="flex items-center justify-between mb-4">
                            <div class="w-12 h-12 bg-blue-600 rounded-lg flex items-center justify-center">
                                <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.111 16.404a5.5 5.5 0 017.778 0M12 20h.01m-7.08-7.071c3.904-3.905 10.236-3.905 14.141 0M1.394 9.393c5.857-5.857 15.355-5.857 21.213 0"></path>
                                </svg>
                            </div>
                            <div class="text-right">
                                <div class="text-2xl font-bold text-blue-900" id="lorawan-base-stations">5</div>
                            </div>
                        </div>
                        <h3 class="text-lg font-semibold text-blue-900 mb-2">LoRaWAN Base Stations</h3>
                        <div class="flex items-center text-sm text-blue-700">
                            <div class="w-2 h-2 bg-green-500 rounded-full mr-2"></div>
                            <span id="base-stations-status">4 Active • 1 Maintenance</span>
                        </div>
                    </div>

                    <!-- Smart Meters -->
                    <div class="bg-gradient-to-br from-green-50 to-green-100 rounded-xl p-6 hover:shadow-md transition-shadow cursor-pointer" onclick="showSmartMetersDetails()">
                        <div class="flex items-center justify-between mb-4">
                            <div class="w-12 h-12 bg-green-600 rounded-lg flex items-center justify-center">
                                <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
                                </svg>
                            </div>
                            <div class="text-right">
                                <div class="text-2xl font-bold text-green-900" id="smart-meters-count">13,743</div>
                            </div>
                        </div>
                        <h3 class="text-lg font-semibold text-green-900 mb-2">Smart Meters</h3>
                        <div class="flex items-center text-sm text-green-700">
                            <div class="w-2 h-2 bg-blue-500 rounded-full mr-2"></div>
                            <span>LoRa-enabled monitoring</span>
                        </div>
                    </div>

                    <!-- Monitored Transformers -->
                    <div class="bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl p-6 hover:shadow-md transition-shadow cursor-pointer" onclick="showMonitoredTransformersDetails()">
                        <div class="flex items-center justify-between mb-4">
                            <div class="w-12 h-12 bg-purple-600 rounded-lg flex items-center justify-center">
                                <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path>
                                </svg>
                            </div>
                            <div class="text-right">
                                <div class="text-2xl font-bold text-purple-900" id="monitored-transformers">77</div>
                            </div>
                        </div>
                        <h3 class="text-lg font-semibold text-purple-900 mb-2">Monitored Transformers</h3>
                        <div class="flex items-center text-sm text-purple-700">
                            <div class="w-2 h-2 bg-orange-500 rounded-full mr-2"></div>
                            <span>LoRa sensors attached</span>
                        </div>
                    </div>

                    <!-- Telecom Towers -->
                    <div class="bg-gradient-to-br from-orange-50 to-orange-100 rounded-xl p-6 hover:shadow-md transition-shadow cursor-pointer" onclick="showTelecomTowersDetails()">
                        <div class="flex items-center justify-between mb-4">
                            <div class="w-12 h-12 bg-orange-600 rounded-lg flex items-center justify-center">
                                <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 18.5l-8-8a5.657 5.657 0 018-8 5.657 5.657 0 018 8l-8 8z"></path>
                                </svg>
                            </div>
                            <div class="text-right">
                                <div class="text-2xl font-bold text-orange-900" id="telecom-towers">12</div>
                            </div>
                        </div>
                        <h3 class="text-lg font-semibold text-orange-900 mb-2">Telecom Towers</h3>
                        <div class="flex items-center text-sm text-orange-700">
                            <div class="w-2 h-2 bg-red-500 rounded-full mr-2"></div>
                            <span>MTN • Vodafone • AirtelTigo</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Regional Performance Analytics -->
            <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-8 mb-8">
                <div class="mb-6">
                    <h2 class="text-2xl font-bold text-gray-900 mb-2">Regional Performance Analytics</h2>
                    <p class="text-gray-600">Energy output monitoring across Ghana's 10 regions</p>
                </div>

                <div class="h-96 bg-gray-50 rounded-lg border border-gray-200 p-4">
                    <canvas id="regional-performance-chart"></canvas>
                </div>
            </div>

            <!-- Power Transmission Network -->
            <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-8 mb-8">
                <div class="mb-6">
                    <h2 class="text-2xl font-bold text-gray-900 mb-2">Power Transmission Network</h2>
                    <p class="text-gray-600">Real-time power flow monitoring via LoRa base towers</p>
                </div>

                <div class="h-96 bg-gray-50 rounded-lg border border-gray-200 p-4">
                    <canvas id="power-transmission-chart"></canvas>
                </div>
            </div>


        </main>
    </div>

    <!-- Interactive Modal -->
    <div id="interactiveModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden">
            <div class="flex items-center justify-between p-6 border-b border-gray-200">
                <h3 id="modalTitle" class="text-xl font-bold text-gray-900"></h3>
                <button onclick="closeModal()" class="text-gray-400 hover:text-gray-600 transition-colors">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>
            <div id="modalContent" class="p-6 overflow-y-auto max-h-[calc(90vh-120px)]">
                <!-- Dynamic content will be inserted here -->
            </div>
        </div>
    </div>

    <!-- Energy Modal -->
    <div id="energy-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center">
        <div class="bg-white rounded-2xl p-8 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-6">
                <h3 class="text-2xl font-bold text-gray-900" id="modal-title">Energy Analytics</h3>
                <button onclick="closeEnergyModal()" class="text-gray-500 hover:text-gray-700">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>
            <div id="modal-content" class="space-y-6">
                <!-- Modal content will be populated here -->
            </div>
        </div>
    </div>

    <script>
        // Regional data for different regions
        const regionalData = {
            'ashanti': {
                name: 'Ashanti Region',
                totalEnergy: 1922.1,
                transmissionEfficiency: 98.5,
                activeTransformers: 77,
                energyTheft: 12.5,
                smartNodes: {
                    active: 156,
                    total: 175,
                    percentage: 89
                },
                meterConnectivity: {
                    connected: 14357,
                    total: 14801,
                    percentage: 97
                },
                networkCoverage: {
                    overall: 94,
                    urban: 98,
                    rural: 87,
                    periUrban: 92
                },
                lorawanInfrastructure: {
                    baseStations: {
                        total: 5,
                        active: 4,
                        maintenance: 1
                    },
                    smartMeters: 13743,
                    monitoredTransformers: 77,
                    telecomTowers: 12
                }
            },
            'greater-accra': {
                name: 'Greater Accra',
                totalEnergy: 2847.3,
                transmissionEfficiency: 99.2,
                activeTransformers: 124,
                energyTheft: 8.2,
                smartNodes: {
                    active: 234,
                    total: 245,
                    percentage: 95
                },
                meterConnectivity: {
                    connected: 23456,
                    total: 24123,
                    percentage: 97
                },
                networkCoverage: {
                    overall: 98,
                    urban: 99,
                    rural: 92,
                    periUrban: 96
                },
                lorawanInfrastructure: {
                    baseStations: {
                        total: 8,
                        active: 7,
                        maintenance: 1
                    },
                    smartMeters: 23456,
                    monitoredTransformers: 124,
                    telecomTowers: 18
                }
            },
            'western': {
                name: 'Western Region',
                totalEnergy: 1923.7,
                transmissionEfficiency: 97.8,
                activeTransformers: 89,
                energyTheft: 15.1,
                smartNodes: {
                    active: 142,
                    total: 167,
                    percentage: 85
                },
                meterConnectivity: {
                    connected: 18234,
                    total: 19456,
                    percentage: 94
                },
                networkCoverage: {
                    overall: 91,
                    urban: 96,
                    rural: 82,
                    periUrban: 89
                },
                lorawanInfrastructure: {
                    baseStations: {
                        total: 6,
                        active: 5,
                        maintenance: 1
                    },
                    smartMeters: 18234,
                    monitoredTransformers: 89,
                    telecomTowers: 14
                }
            },
            'central': {
                name: 'Central Region',
                totalEnergy: 1456.2,
                transmissionEfficiency: 98.1,
                activeTransformers: 62,
                energyTheft: 11.3,
                smartNodes: {
                    active: 98,
                    total: 112,
                    percentage: 88
                },
                meterConnectivity: {
                    connected: 12567,
                    total: 13234,
                    percentage: 95
                },
                networkCoverage: {
                    overall: 93,
                    urban: 97,
                    rural: 85,
                    periUrban: 91
                },
                lorawanInfrastructure: {
                    baseStations: {
                        total: 4,
                        active: 4,
                        maintenance: 0
                    },
                    smartMeters: 12567,
                    monitoredTransformers: 62,
                    telecomTowers: 10
                }
            },
            'northern': {
                name: 'Northern Region',
                totalEnergy: 1234.8,
                transmissionEfficiency: 96.7,
                activeTransformers: 45,
                energyTheft: 18.2,
                smartNodes: {
                    active: 67,
                    total: 89,
                    percentage: 75
                },
                meterConnectivity: {
                    connected: 8934,
                    total: 10234,
                    percentage: 87
                },
                networkCoverage: {
                    overall: 78,
                    urban: 92,
                    rural: 65,
                    periUrban: 81
                },
                lorawanInfrastructure: {
                    baseStations: {
                        total: 3,
                        active: 2,
                        maintenance: 1
                    },
                    smartMeters: 8934,
                    monitoredTransformers: 45,
                    telecomTowers: 8
                }
            },
            'eastern': {
                name: 'Eastern Region',
                totalEnergy: 1678.9,
                transmissionEfficiency: 98.9,
                activeTransformers: 73,
                energyTheft: 9.8
            },
            'upper-east': {
                name: 'Upper East',
                totalEnergy: 892.4,
                transmissionEfficiency: 95.3,
                activeTransformers: 28,
                energyTheft: 22.1
            },
            'upper-west': {
                name: 'Upper West',
                totalEnergy: 756.7,
                transmissionEfficiency: 94.8,
                activeTransformers: 23,
                energyTheft: 24.5
            },
            'volta': {
                name: 'Volta Region',
                totalEnergy: 1345.6,
                transmissionEfficiency: 97.4,
                activeTransformers: 58,
                energyTheft: 13.7
            },
            'brong-ahafo': {
                name: 'Brong Ahafo',
                totalEnergy: 1567.3,
                transmissionEfficiency: 98.0,
                activeTransformers: 67,
                energyTheft: 14.2
            }
        };

        // Initialize charts
        let regionalChart = null;
        let transmissionChart = null;
        let regionalMiniChart = null;
        let transmissionMiniChart = null;

        // Update dashboard based on selected region
        function updateDashboardRegion() {
            const selector = document.getElementById('dashboard-region-selector');
            const selectedRegion = selector.value;
            const data = regionalData[selectedRegion] || regionalData['ashanti'];

            // Update key metrics cards
            document.getElementById('total-energy-value').textContent = data.totalEnergy.toLocaleString();
            document.getElementById('transmission-efficiency').textContent = data.transmissionEfficiency;
            document.getElementById('active-transformers').textContent = data.activeTransformers;
            document.getElementById('energy-theft').textContent = data.energyTheft;

            // Update charts
            updateCharts(data);
        }

        // Initialize charts
        function initializeCharts() {
            // Regional Performance Chart
            const regionalCtx = document.getElementById('regional-performance-chart');
            if (regionalCtx) {
                regionalChart = new Chart(regionalCtx, {
                    type: 'line',
                    data: {
                        labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
                        datasets: [{
                            label: 'Energy Output (MW)',
                            data: [1200, 1350, 1180, 1420, 1650, 1580, 1720, 1890, 1750, 1920, 1850, 1922],
                            borderColor: '#3B82F6',
                            backgroundColor: 'rgba(59, 130, 246, 0.1)',
                            tension: 0.4,
                            fill: true,
                            pointBackgroundColor: '#3B82F6',
                            pointBorderColor: '#ffffff',
                            pointBorderWidth: 2
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                labels: { color: '#374151' }
                            }
                        },
                        scales: {
                            x: {
                                ticks: { color: '#6B7280' },
                                grid: { color: 'rgba(107, 114, 128, 0.1)' }
                            },
                            y: {
                                ticks: { color: '#6B7280' },
                                grid: { color: 'rgba(107, 114, 128, 0.1)' }
                            }
                        },
                        onClick: (event, elements) => {
                            if (elements.length > 0) {
                                const dataIndex = elements[0].index;
                                const month = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'][dataIndex];
                                const value = [1200, 1350, 1180, 1420, 1650, 1580, 1720, 1890, 1750, 1920, 1850, 1922][dataIndex];
                                showRegionalChartDetails(month, value);
                            }
                        }
                    }
                });
            }

            // Power Transmission Chart
            const transmissionCtx = document.getElementById('power-transmission-chart');
            if (transmissionCtx) {
                transmissionChart = new Chart(transmissionCtx, {
                    type: 'line',
                    data: {
                        labels: ['00:00', '04:00', '08:00', '12:00', '16:00', '20:00', '24:00'],
                        datasets: [{
                            label: 'Power Flow (kW)',
                            data: [1200, 980, 1450, 1738, 1620, 1890, 1650],
                            borderColor: '#10B981',
                            backgroundColor: 'rgba(16, 185, 129, 0.1)',
                            tension: 0.4,
                            fill: true,
                            pointBackgroundColor: '#10B981',
                            pointBorderColor: '#ffffff',
                            pointBorderWidth: 2
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                labels: { color: '#374151' }
                            }
                        },
                        scales: {
                            x: {
                                ticks: { color: '#6B7280' },
                                grid: { color: 'rgba(107, 114, 128, 0.1)' }
                            },
                            y: {
                                ticks: { color: '#6B7280' },
                                grid: { color: 'rgba(107, 114, 128, 0.1)' }
                            }
                        },
                        onClick: (event, elements) => {
                            if (elements.length > 0) {
                                const dataIndex = elements[0].index;
                                const time = ['00:00', '04:00', '08:00', '12:00', '16:00', '20:00', '24:00'][dataIndex];
                                const value = [1200, 980, 1450, 1738, 1620, 1890, 1650][dataIndex];
                                showTransmissionChartDetails(time, value);
                            }
                        }
                    }
                });
            }

            // Regional Performance Mini Chart
            const regionalMiniCtx = document.getElementById('regional-performance-mini');
            if (regionalMiniCtx) {
                regionalMiniChart = new Chart(regionalMiniCtx, {
                    type: 'line',
                    data: {
                        labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
                        datasets: [{
                            label: 'Energy Output (MW)',
                            data: [1200, 1350, 1180, 1420, 1650, 1580],
                            borderColor: '#3B82F6',
                            backgroundColor: 'rgba(59, 130, 246, 0.1)',
                            tension: 0.4,
                            fill: true,
                            pointRadius: 3
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { display: false }
                        },
                        scales: {
                            x: {
                                ticks: { color: '#6B7280', font: { size: 10 } },
                                grid: { display: false }
                            },
                            y: {
                                ticks: { color: '#6B7280', font: { size: 10 } },
                                grid: { color: 'rgba(107, 114, 128, 0.1)' }
                            }
                        }
                    }
                });
            }

            // Power Transmission Mini Chart
            const transmissionMiniCtx = document.getElementById('power-transmission-mini');
            if (transmissionMiniCtx) {
                transmissionMiniChart = new Chart(transmissionMiniCtx, {
                    type: 'line',
                    data: {
                        labels: ['00:00', '04:00', '08:00', '12:00', '16:00', '20:00'],
                        datasets: [{
                            label: 'Power Flow (kW)',
                            data: [1200, 980, 1450, 1738, 1620, 1890],
                            borderColor: '#10B981',
                            backgroundColor: 'rgba(16, 185, 129, 0.1)',
                            tension: 0.4,
                            fill: true,
                            pointRadius: 3
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { display: false }
                        },
                        scales: {
                            x: {
                                ticks: { color: '#6B7280', font: { size: 10 } },
                                grid: { display: false }
                            },
                            y: {
                                ticks: { color: '#6B7280', font: { size: 10 } },
                                grid: { color: 'rgba(107, 114, 128, 0.1)' }
                            }
                        }
                    }
                });
            }
        }

        // Update charts with new data
        function updateCharts(data) {
            if (regionalChart) {
                // Update with region-specific data
                regionalChart.data.datasets[0].data = generateRegionalData(data);
                regionalChart.update();
            }

            if (transmissionChart) {
                // Update with region-specific transmission data
                transmissionChart.data.datasets[0].data = generateTransmissionData(data);
                transmissionChart.update();
            }

            if (regionalMiniChart) {
                // Update mini chart with recent data
                regionalMiniChart.data.datasets[0].data = generateRegionalData(data).slice(6);
                regionalMiniChart.update();
            }

            if (transmissionMiniChart) {
                // Update mini chart with recent data
                transmissionMiniChart.data.datasets[0].data = generateTransmissionData(data).slice(0, 6);
                transmissionMiniChart.update();
            }
        }

        // Generate regional data based on selected region
        function generateRegionalData(data) {
            const baseValue = data.totalEnergy;
            return Array.from({length: 12}, (_, i) =>
                Math.round(baseValue * (0.8 + Math.random() * 0.4) * (1 + i * 0.02))
            );
        }

        // Generate transmission data based on selected region
        function generateTransmissionData(data) {
            const baseValue = data.totalEnergy;
            return Array.from({length: 7}, (_, i) =>
                Math.round(baseValue * (0.6 + Math.random() * 0.8))
            );
        }

        // Modal functions
        function showEnergyModal(type) {
            const modal = document.getElementById('energy-modal');
            const title = document.getElementById('modal-title');
            const content = document.getElementById('modal-content');

            let modalTitle = '';
            let modalContent = '';

            switch(type) {
                case 'total-energy':
                    modalTitle = 'Total Energy Tracked - AI Analysis';
                    modalContent = `
                        <div class="space-y-4">
                            <div class="bg-blue-50 p-4 rounded-lg">
                                <h4 class="font-semibold text-blue-900 mb-2">Current Status</h4>
                                <p class="text-blue-800">Total energy consumption: 1922.1 kWh</p>
                                <p class="text-green-600">↗ 2.1% increase from last hour</p>
                            </div>
                            <div class="bg-yellow-50 p-4 rounded-lg">
                                <h4 class="font-semibold text-yellow-900 mb-2">AI Prediction</h4>
                                <p class="text-yellow-800">Based on current trends, energy consumption is expected to increase by 3.5% in the next 4 hours due to peak evening usage.</p>
                            </div>
                            <div class="bg-green-50 p-4 rounded-lg">
                                <h4 class="font-semibold text-green-900 mb-2">Recommendations</h4>
                                <ul class="text-green-800 space-y-1">
                                    <li>• Optimize load distribution during peak hours</li>
                                    <li>• Consider activating backup generators in high-demand areas</li>
                                    <li>• Monitor transformer load levels closely</li>
                                </ul>
                            </div>
                        </div>
                    `;
                    break;
                case 'energy-theft':
                    modalTitle = 'Energy Theft Detection - AI Analysis';
                    modalContent = `
                        <div class="space-y-4">
                            <div class="bg-red-50 p-4 rounded-lg">
                                <h4 class="font-semibold text-red-900 mb-2">Theft Detection</h4>
                                <p class="text-red-800">12.5% energy theft detected in current region</p>
                                <p class="text-red-600">↘ 0.8% decrease from last hour</p>
                            </div>
                            <div class="bg-orange-50 p-4 rounded-lg">
                                <h4 class="font-semibold text-orange-900 mb-2">AI Analysis</h4>
                                <p class="text-orange-800">Machine learning algorithms have identified 3 high-risk areas with unusual consumption patterns indicating potential theft.</p>
                            </div>
                            <div class="bg-blue-50 p-4 rounded-lg">
                                <h4 class="font-semibold text-blue-900 mb-2">Recommended Actions</h4>
                                <ul class="text-blue-800 space-y-1">
                                    <li>• Deploy field teams to investigate flagged locations</li>
                                    <li>• Increase smart meter monitoring frequency</li>
                                    <li>• Implement additional security measures</li>
                                </ul>
                            </div>
                        </div>
                    `;
                    break;
                case 'active-alerts':
                    modalTitle = 'Active Alerts - AI Monitoring';
                    modalContent = `
                        <div class="space-y-4">
                            <div class="bg-yellow-50 p-4 rounded-lg">
                                <h4 class="font-semibold text-yellow-900 mb-2">Current Alerts</h4>
                                <p class="text-yellow-800">9 active system notifications</p>
                                <p class="text-green-600">↗ 1.2% increase from last hour</p>
                            </div>
                            <div class="bg-red-50 p-4 rounded-lg">
                                <h4 class="font-semibold text-red-900 mb-2">Critical Issues</h4>
                                <ul class="text-red-800 space-y-2">
                                    <li>• Voltage fluctuation detected in Transformer TXF-003</li>
                                    <li>• LoRaWAN connectivity issues in rural areas</li>
                                    <li>• Smart meter communication timeout (3 devices)</li>
                                </ul>
                            </div>
                            <div class="bg-purple-50 p-4 rounded-lg">
                                <h4 class="font-semibold text-purple-900 mb-2">AI Predictions</h4>
                                <p class="text-purple-800">Predictive models suggest 2 additional alerts may trigger within the next hour based on current system stress patterns.</p>
                            </div>
                        </div>
                    `;
                    break;
            }

            title.textContent = modalTitle;
            content.innerHTML = modalContent;
            modal.classList.remove('hidden');
        }

        function closeEnergyModal() {
            document.getElementById('energy-modal').classList.add('hidden');
        }

        function redirectToTransformers(type) {
            const region = document.getElementById('dashboard-region-selector').value;
            window.location.href = `transformers.html?region=${region}&type=${type}`;
        }

        // Simulate voltage fluctuation alerts
        function simulateVoltageAlerts() {
            const alerts = [
                'Voltage fluctuation detected in Transformer TXF-003 - Kumasi Metro',
                'LoRaWAN connectivity timeout in rural Ashanti region',
                'Smart meter communication failure - 3 devices offline',
                'Power transmission irregularity detected on Line TX-45',
                'Grid load imbalance warning - Western sector'
            ];

            setInterval(() => {
                if (Math.random() < 0.3) { // 30% chance every 10 seconds
                    const randomAlert = alerts[Math.floor(Math.random() * alerts.length)];
                    showLightAlert({
                        type: 'warning',
                        message: randomAlert,
                        icon: '⚡',
                        priority: 'high',
                        category: 'voltage_monitoring'
                    });
                }
            }, 10000);
        }

        // Initialize everything when page loads
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize charts
            initializeCharts();

            // Load default region data
            updateDashboardRegion();

            // Theme toggle functionality
            const themeToggle = document.getElementById('theme-toggle');
            const profileToggle = document.getElementById('profile-toggle');
            const profileDropdown = document.getElementById('profile-dropdown');
            const profileArrow = document.getElementById('profile-arrow');
            let isProfileOpen = false;

            // Theme toggle
            if (themeToggle) {
                themeToggle.addEventListener('click', function() {
                    document.body.classList.toggle('dark-mode');
                    const icon = themeToggle.querySelector('span');
                    if (document.body.classList.contains('dark-mode')) {
                        icon.textContent = '🌙';
                    } else {
                        icon.textContent = '☀️';
                    }
                });
            }

            // Profile dropdown
            if (profileToggle && profileDropdown) {
                profileToggle.addEventListener('click', function(e) {
                    e.stopPropagation();
                    isProfileOpen = !isProfileOpen;

                    if (isProfileOpen) {
                        profileDropdown.classList.remove('hidden');
                        profileArrow.style.transform = 'rotate(180deg)';
                        setTimeout(() => profileDropdown.classList.add('show'), 10);
                    } else {
                        profileDropdown.classList.remove('show');
                        profileArrow.style.transform = 'rotate(0deg)';
                        setTimeout(() => profileDropdown.classList.add('hidden'), 200);
                    }
                });
            }

            // Close dropdown when clicking outside
            document.addEventListener('click', function(e) {
                if (isProfileOpen && profileToggle && profileDropdown &&
                    !profileToggle.contains(e.target) && !profileDropdown.contains(e.target)) {
                    isProfileOpen = false;
                    profileDropdown.classList.remove('show');
                    profileArrow.style.transform = 'rotate(0deg)';
                    setTimeout(() => profileDropdown.classList.add('hidden'), 200);
                }
            });
        });

        // Additional notification templates for voltage monitoring
        const voltageNotificationTemplates = [
            { type: 'error', message: 'Transformer TXF-003 offline in Kumasi Metro District', priority: 'high', category: 'infrastructure' },
            { type: 'warning', message: '12 smart meters pending validation in Ashanti Region', priority: 'medium', category: 'validation' },
            { type: 'error', message: 'Energy theft detected - Est. 8.7 kWh unaccounted in Sector 5', priority: 'high', category: 'security' },
            { type: 'info', message: 'LoRa Base Station BS-002 maintenance scheduled for tomorrow', priority: 'low', category: 'maintenance' },
            { type: 'warning', message: 'Grid load exceeding 85% capacity in Greater Accra', priority: 'medium', category: 'capacity' },
            { type: 'error', message: 'Communication timeout with Smart Meter SM-1847', priority: 'high', category: 'connectivity' },
            { type: 'info', message: 'Scheduled maintenance completed on Transformer TXF-012', priority: 'low', category: 'maintenance' },
            { type: 'warning', message: 'Voltage fluctuation detected in Distribution Line DL-23', priority: 'medium', category: 'voltage' },
            { type: 'error', message: 'LoRaWAN gateway LG-005 connection lost', priority: 'high', category: 'connectivity' },
            { type: 'info', message: 'New smart meters deployed in Tema Industrial Area', priority: 'low', category: 'deployment' }
        ];

        function showLightAlert(notification) {
            const container = document.getElementById('notification-container');
            const id = ++notificationId;

            // Create notification object for storage
            const notificationObj = {
                id: id,
                type: notification.type,
                message: notification.message,
                icon: notification.icon || '🔔',
                priority: notification.priority || 'medium',
                category: notification.category || 'general',
                timestamp: new Date().toISOString(),
                status: 'unread',
                completed: null
            };

            // Store notification
            allNotifications.unshift(notificationObj);
            localStorage.setItem('pgx_notifications', JSON.stringify(allNotifications));
            unreadNotifications++;

            // Update notification badge
            notificationCount++;
            updateNotificationBadge();
            updateNotificationIndicator();

            const alertEl = document.createElement('div');
            alertEl.className = `notification light-alert ${getNotificationClass(notification.type)}`;
            alertEl.innerHTML = `
                <div class="flex items-start justify-between">
                    <div class="flex-1 pr-2">
                        <p class="text-sm font-medium text-gray-800">${notification.message}</p>
                        <p class="text-xs text-gray-500 mt-1">${notification.category} • ${notification.priority}</p>
                    </div>
                    <button onclick="viewNotification(${id})" class="text-xs px-2 py-1 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors flex-shrink-0">
                        View
                    </button>
                </div>
            `;

            container.appendChild(alertEl);

            // Auto-remove after 8 seconds
            setTimeout(() => {
                if (alertEl.parentNode) {
                    alertEl.style.opacity = '0';
                    alertEl.style.transform = 'translateX(100%)';
                    setTimeout(() => {
                        if (alertEl.parentNode) {
                            alertEl.parentNode.removeChild(alertEl);
                        }
                    }, 300);
                }
            }, 8000);
        }

        function viewNotification(id) {
            // Mark notification as read
            const notification = allNotifications.find(n => n.id === id);
            if (notification) {
                notification.status = 'read';
                localStorage.setItem('pgx_notifications', JSON.stringify(allNotifications));
            }

            // Open notifications page
            window.open('notifications.html', '_blank');
        }

        function getNotificationClass(type) {
            const classes = {
                'info': 'bg-blue-50 border-blue-200 text-blue-800',
                'warning': 'bg-yellow-50 border-yellow-200 text-yellow-800',
                'error': 'bg-red-50 border-red-200 text-red-800',
                'success': 'bg-green-50 border-green-200 text-green-800'
            };
            return classes[type] || classes['info'];
        }

        // Update notification badge
        function updateNotificationBadge() {
            const badge = document.getElementById('notification-badge');
            if (badge) {
                if (notificationCount > 0) {
                    badge.textContent = notificationCount;
                    badge.classList.remove('hidden');
                } else {
                    badge.classList.add('hidden');
                }
            }
        }

        // Initialize notification count from storage
        function initializeNotifications() {
            unreadNotifications = allNotifications.filter(n => n.status === 'unread').length;
            updateNotificationIndicator();
        }

        function updateNotificationIndicator() {
            // This would update any notification indicators in the UI
        }

        // Start notification system
        function startNotificationSystem() {
            setInterval(() => {
                if (Math.random() < 0.4) { // 40% chance every 15 seconds
                    const randomTemplate = notificationTemplates[Math.floor(Math.random() * notificationTemplates.length)];
                    showLightAlert(randomTemplate);
                }
            }, 15000);
        }

        // Countdown timer
        function updateCountdown() {
            const countdownEl = document.getElementById('countdown');
            if (countdownEl) {
                let timeLeft = 3600; // 1 hour in seconds

                setInterval(() => {
                    const hours = Math.floor(timeLeft / 3600);
                    const minutes = Math.floor((timeLeft % 3600) / 60);
                    const seconds = timeLeft % 60;

                    countdownEl.textContent = `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;

                    timeLeft--;
                    if (timeLeft < 0) {
                        timeLeft = 3600; // Reset to 1 hour
                    }
                }, 1000);
            }
        }

        // Modal utility functions
        function showModal(title, content) {
            document.getElementById('modalTitle').textContent = title;
            document.getElementById('modalContent').innerHTML = content;
            document.getElementById('interactiveModal').classList.remove('hidden');
            document.body.style.overflow = 'hidden';
        }

        function closeModal() {
            document.getElementById('interactiveModal').classList.add('hidden');
            document.body.style.overflow = 'auto';
        }

        // Close modal when clicking outside
        document.getElementById('interactiveModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeModal();
            }
        });

        // Close modal with Escape key
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                closeModal();
            }
        });

        // Interactive Modal Functions
        function showEnergyDetails() {
            const currentRegion = getCurrentRegion();
            const regionData = regionalData[currentRegion];

            showModal('Total Energy Tracked - Detailed View', `
                <div class="space-y-6">
                    <div class="bg-blue-50 p-4 rounded-lg">
                        <h4 class="font-semibold text-blue-900 mb-2">Current Energy Tracking</h4>
                        <p class="text-blue-800 text-lg font-bold">${regionData.totalEnergy} kWh</p>
                        <p class="text-blue-600">+2.1% increase from last hour</p>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div class="bg-gray-50 p-4 rounded-lg">
                            <h5 class="font-semibold text-gray-900 mb-2">Base Stations Tracking</h5>
                            <ul class="text-sm text-gray-700 space-y-1">
                                <li>• Kumasi Central: 456.2 kWh</li>
                                <li>• Obuasi District: 321.8 kWh</li>
                                <li>• Ejisu-Juaben: 289.4 kWh</li>
                                <li>• Asante Akim: 234.7 kWh</li>
                                <li>• Bekwai Municipal: 198.3 kWh</li>
                                <li>• Other Districts: 421.7 kWh</li>
                            </ul>
                        </div>

                        <div class="bg-green-50 p-4 rounded-lg">
                            <h5 class="font-semibold text-green-900 mb-2">Performance Metrics</h5>
                            <ul class="text-sm text-green-700 space-y-1">
                                <li>• Peak Load: 2,145 kW</li>
                                <li>• Average Load: 1,822 kW</li>
                                <li>• Load Factor: 84.9%</li>
                                <li>• Power Quality: 99.2%</li>
                                <li>• Grid Stability: Excellent</li>
                            </ul>
                        </div>
                    </div>

                    <div class="bg-yellow-50 p-4 rounded-lg">
                        <h5 class="font-semibold text-yellow-900 mb-2">District Energy Distribution</h5>
                        <div class="space-y-2">
                            <div class="flex justify-between">
                                <span>Urban Areas (Kumasi Metro)</span>
                                <span class="font-semibold">67.3%</span>
                            </div>
                            <div class="flex justify-between">
                                <span>Semi-Urban Districts</span>
                                <span class="font-semibold">22.1%</span>
                            </div>
                            <div class="flex justify-between">
                                <span>Rural Communities</span>
                                <span class="font-semibold">10.6%</span>
                            </div>
                        </div>
                    </div>
                </div>
            `);
        }

        function showTransmissionDetails() {
            const currentRegion = getCurrentRegion();
            const regionData = regionalData[currentRegion];

            showModal('Transmission Efficiency - Detailed Analysis', `
                <div class="space-y-6">
                    <div class="bg-green-50 p-4 rounded-lg">
                        <h4 class="font-semibold text-green-900 mb-2">Current Efficiency</h4>
                        <p class="text-green-800 text-lg font-bold">${regionData.transmissionEfficiency}%</p>
                        <p class="text-green-600">+0.3% improvement from last hour</p>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div class="bg-gray-50 p-4 rounded-lg">
                            <h5 class="font-semibold text-gray-900 mb-2">Transmission Lines Status</h5>
                            <ul class="text-sm text-gray-700 space-y-1">
                                <li>• 330kV Lines: 98.7% efficiency</li>
                                <li>• 161kV Lines: 97.9% efficiency</li>
                                <li>• 69kV Lines: 96.8% efficiency</li>
                                <li>• 34.5kV Lines: 95.2% efficiency</li>
                                <li>• Distribution Lines: 94.1% efficiency</li>
                            </ul>
                        </div>

                        <div class="bg-blue-50 p-4 rounded-lg">
                            <h5 class="font-semibold text-blue-900 mb-2">Loss Analysis</h5>
                            <ul class="text-sm text-blue-700 space-y-1">
                                <li>• Technical Losses: 1.2%</li>
                                <li>• Commercial Losses: 0.3%</li>
                                <li>• Transmission Losses: 0.8%</li>
                                <li>• Distribution Losses: 1.1%</li>
                                <li>• Total System Losses: 1.5%</li>
                            </ul>
                        </div>
                    </div>

                    <div class="bg-purple-50 p-4 rounded-lg">
                        <h5 class="font-semibold text-purple-900 mb-2">Real-time Monitoring Points</h5>
                        <div class="grid grid-cols-2 gap-2 text-sm">
                            <div>Kumasi Substation: 99.1%</div>
                            <div>Obuasi Substation: 98.8%</div>
                            <div>Ejisu Substation: 97.6%</div>
                            <div>Bekwai Substation: 98.2%</div>
                        </div>
                    </div>
                </div>
            `);
        }

        function showTheftDetails() {
            const currentRegion = getCurrentRegion();

            showModal('Energy Theft Detection - AI Analysis', `
                <div class="space-y-6">
                    <div class="bg-red-50 p-4 rounded-lg">
                        <h4 class="font-semibold text-red-900 mb-2">Theft Detection Summary</h4>
                        <p class="text-red-800 text-lg font-bold">12.5% energy theft detected</p>
                        <p class="text-red-600">↘ 0.8% decrease from last hour</p>
                    </div>

                    <div class="bg-orange-50 p-4 rounded-lg">
                        <h5 class="font-semibold text-orange-900 mb-2">Suspicious Areas & Activities</h5>
                        <div class="space-y-3">
                            <div class="border-l-4 border-red-500 pl-3">
                                <h6 class="font-semibold text-red-800">High Risk - Obuasi District</h6>
                                <p class="text-sm text-red-700">Meter tampering detected at 3 locations</p>
                                <p class="text-xs text-red-600">Poles: OB-234, OB-567, OB-891</p>
                            </div>
                            <div class="border-l-4 border-orange-500 pl-3">
                                <h6 class="font-semibold text-orange-800">Medium Risk - Ejisu-Juaben</h6>
                                <p class="text-sm text-orange-700">Unusual consumption patterns detected</p>
                                <p class="text-xs text-orange-600">Meters: EJ-1234, EJ-5678</p>
                            </div>
                            <div class="border-l-4 border-yellow-500 pl-3">
                                <h6 class="font-semibold text-yellow-800">Low Risk - Bekwai Municipal</h6>
                                <p class="text-sm text-yellow-700">Minor irregularities in power flow</p>
                                <p class="text-xs text-yellow-600">Area: Bekwai Township</p>
                            </div>
                        </div>
                    </div>

                    <div class="bg-blue-50 p-4 rounded-lg">
                        <h5 class="font-semibold text-blue-900 mb-2">AI Detection Metrics</h5>
                        <div class="grid grid-cols-2 gap-4 text-sm">
                            <div>
                                <span class="text-blue-700">Detection Accuracy:</span>
                                <span class="font-semibold text-blue-900">94.7%</span>
                            </div>
                            <div>
                                <span class="text-blue-700">False Positives:</span>
                                <span class="font-semibold text-blue-900">2.1%</span>
                            </div>
                            <div>
                                <span class="text-blue-700">Cases Investigated:</span>
                                <span class="font-semibold text-blue-900">47</span>
                            </div>
                            <div>
                                <span class="text-blue-700">Recovery Rate:</span>
                                <span class="font-semibold text-blue-900">78.3%</span>
                            </div>
                        </div>
                    </div>
                </div>
            `);
        }

        function showTransformerDetails() {
            const currentRegion = getCurrentRegion();

            showModal('Active Transformers - Equipment Status', `
                <div class="space-y-6">
                    <div class="bg-purple-50 p-4 rounded-lg">
                        <h4 class="font-semibold text-purple-900 mb-2">Transformer Overview</h4>
                        <p class="text-purple-800 text-lg font-bold">77 Active Units</p>
                        <p class="text-purple-600">72 online, 5 in maintenance</p>
                    </div>

                    <div class="bg-gray-50 p-4 rounded-lg">
                        <h5 class="font-semibold text-gray-900 mb-3">Transformer Locations</h5>
                        <div class="space-y-2 max-h-64 overflow-y-auto">
                            <div class="transformer-item bg-white p-3 rounded border cursor-pointer hover:bg-blue-50" onclick="redirectToMap('6.6885,-1.6244')">
                                <div class="flex justify-between items-start">
                                    <div>
                                        <h6 class="font-semibold text-gray-900">TXF-KMA-001</h6>
                                        <p class="text-sm text-gray-600">Kumasi Central Substation</p>
                                        <p class="text-xs text-gray-500">Adum, Kumasi Metropolitan</p>
                                        <p class="text-xs text-blue-600">6.6885°N, -1.6244°W</p>
                                    </div>
                                    <span class="bg-green-100 text-green-800 text-xs px-2 py-1 rounded">Online</span>
                                </div>
                            </div>

                            <div class="transformer-item bg-white p-3 rounded border cursor-pointer hover:bg-blue-50" onclick="redirectToMap('6.2027,-1.2560')">
                                <div class="flex justify-between items-start">
                                    <div>
                                        <h6 class="font-semibold text-gray-900">TXF-OBS-002</h6>
                                        <p class="text-sm text-gray-600">Obuasi Main Substation</p>
                                        <p class="text-xs text-gray-500">Obuasi Municipal, Ashanti</p>
                                        <p class="text-xs text-blue-600">6.2027°N, -1.2560°W</p>
                                    </div>
                                    <span class="bg-green-100 text-green-800 text-xs px-2 py-1 rounded">Online</span>
                                </div>
                            </div>

                            <div class="transformer-item bg-white p-3 rounded border cursor-pointer hover:bg-blue-50" onclick="redirectToMap('6.7924,-1.4311')">
                                <div class="flex justify-between items-start">
                                    <div>
                                        <h6 class="font-semibold text-gray-900">TXF-EJS-003</h6>
                                        <p class="text-sm text-gray-600">Ejisu Distribution Center</p>
                                        <p class="text-xs text-gray-500">Ejisu-Juaben Municipal</p>
                                        <p class="text-xs text-blue-600">6.7924°N, -1.4311°W</p>
                                    </div>
                                    <span class="bg-yellow-100 text-yellow-800 text-xs px-2 py-1 rounded">Maintenance</span>
                                </div>
                            </div>

                            <div class="transformer-item bg-white p-3 rounded border cursor-pointer hover:bg-blue-50" onclick="redirectToMap('6.4667,-1.5833')">
                                <div class="flex justify-between items-start">
                                    <div>
                                        <h6 class="font-semibold text-gray-900">TXF-BKW-004</h6>
                                        <p class="text-sm text-gray-600">Bekwai Municipal Substation</p>
                                        <p class="text-xs text-gray-500">Bekwai, Ashanti Region</p>
                                        <p class="text-xs text-blue-600">6.4667°N, -1.5833°W</p>
                                    </div>
                                    <span class="bg-green-100 text-green-800 text-xs px-2 py-1 rounded">Online</span>
                                </div>
                            </div>

                            <div class="transformer-item bg-white p-3 rounded border cursor-pointer hover:bg-blue-50" onclick="redirectToMap('6.8667,-1.6167')">
                                <div class="flex justify-between items-start">
                                    <div>
                                        <h6 class="font-semibold text-gray-900">TXF-MMP-005</h6>
                                        <p class="text-sm text-gray-600">Mampong Distribution Hub</p>
                                        <p class="text-xs text-gray-500">Mampong Municipal</p>
                                        <p class="text-xs text-blue-600">6.8667°N, -1.6167°W</p>
                                    </div>
                                    <span class="bg-green-100 text-green-800 text-xs px-2 py-1 rounded">Online</span>
                                </div>
                            </div>

                            <div class="transformer-item bg-white p-3 rounded border cursor-pointer hover:bg-blue-50" onclick="redirectToMap('6.5500,-1.3500')">
                                <div class="flex justify-between items-start">
                                    <div>
                                        <h6 class="font-semibold text-gray-900">TXF-KNT-006</h6>
                                        <p class="text-sm text-gray-600">Konongo-Odumase Substation</p>
                                        <p class="text-xs text-gray-500">Asante Akim South</p>
                                        <p class="text-xs text-blue-600">6.5500°N, -1.3500°W</p>
                                    </div>
                                    <span class="bg-red-100 text-red-800 text-xs px-2 py-1 rounded">Maintenance</span>
                                </div>
                            </div>
                        </div>

                        <div class="mt-4 text-sm text-gray-600">
                            <p>Click on any transformer to view its location on the map</p>
                        </div>
                    </div>

                    <div class="grid grid-cols-2 gap-4">
                        <div class="bg-green-50 p-3 rounded-lg">
                            <h6 class="font-semibold text-green-900">Operational Status</h6>
                            <p class="text-sm text-green-700">93.5% uptime this month</p>
                        </div>
                        <div class="bg-blue-50 p-3 rounded-lg">
                            <h6 class="font-semibold text-blue-900">Load Capacity</h6>
                            <p class="text-sm text-blue-700">78.2% average utilization</p>
                        </div>
                    </div>
                </div>
            `);
        }

        function showSmartNodesDetails() {
            const currentRegion = getCurrentRegion();
            const regionData = regionalData[currentRegion];

            showModal('Active Smart Nodes - Network Status', `
                <div class="space-y-6">
                    <div class="bg-indigo-50 p-4 rounded-lg">
                        <h4 class="font-semibold text-indigo-900 mb-2">Smart Nodes Overview</h4>
                        <p class="text-indigo-800 text-lg font-bold">${regionData.smartNodes.percentage}% Active</p>
                        <p class="text-indigo-600">${regionData.smartNodes.active} of ${regionData.smartNodes.total} nodes operational</p>
                    </div>

                    <div class="bg-gray-50 p-4 rounded-lg">
                        <h5 class="font-semibold text-gray-900 mb-3">Node Status by District</h5>
                        <div class="space-y-2 max-h-64 overflow-y-auto">
                            <div class="node-item bg-white p-3 rounded border">
                                <div class="flex justify-between items-start">
                                    <div>
                                        <h6 class="font-semibold text-gray-900">NODE-KMA-001</h6>
                                        <p class="text-sm text-gray-600">Kumasi Central Hub</p>
                                        <p class="text-xs text-blue-600">6.6885°N, -1.6244°W</p>
                                        <p class="text-xs text-green-600">Health: 94%</p>
                                    </div>
                                    <span class="bg-green-100 text-green-800 text-xs px-2 py-1 rounded">Active</span>
                                </div>
                            </div>

                            <div class="node-item bg-white p-3 rounded border">
                                <div class="flex justify-between items-start">
                                    <div>
                                        <h6 class="font-semibold text-gray-900">NODE-OBS-002</h6>
                                        <p class="text-sm text-gray-600">Obuasi District Node</p>
                                        <p class="text-xs text-blue-600">6.2027°N, -1.2560°W</p>
                                        <p class="text-xs text-yellow-600">Health: 76%</p>
                                    </div>
                                    <span class="bg-yellow-100 text-yellow-800 text-xs px-2 py-1 rounded">Maintenance Needed</span>
                                </div>
                            </div>

                            <div class="node-item bg-white p-3 rounded border">
                                <div class="flex justify-between items-start">
                                    <div>
                                        <h6 class="font-semibold text-gray-900">NODE-EJS-003</h6>
                                        <p class="text-sm text-gray-600">Ejisu-Juaben Node</p>
                                        <p class="text-xs text-blue-600">6.7924°N, -1.4311°W</p>
                                        <p class="text-xs text-green-600">Health: 89%</p>
                                    </div>
                                    <span class="bg-green-100 text-green-800 text-xs px-2 py-1 rounded">Active</span>
                                </div>
                            </div>

                            <div class="node-item bg-white p-3 rounded border">
                                <div class="flex justify-between items-start">
                                    <div>
                                        <h6 class="font-semibold text-gray-900">NODE-BKW-004</h6>
                                        <p class="text-sm text-gray-600">Bekwai Municipal Node</p>
                                        <p class="text-xs text-blue-600">6.4667°N, -1.5833°W</p>
                                        <p class="text-xs text-red-600">Health: 45%</p>
                                    </div>
                                    <span class="bg-red-100 text-red-800 text-xs px-2 py-1 rounded">Maintenance Required</span>
                                </div>
                            </div>

                            <div class="node-item bg-white p-3 rounded border">
                                <div class="flex justify-between items-start">
                                    <div>
                                        <h6 class="font-semibold text-gray-900">NODE-MMP-005</h6>
                                        <p class="text-sm text-gray-600">Mampong Distribution Node</p>
                                        <p class="text-xs text-blue-600">6.8667°N, -1.6167°W</p>
                                        <p class="text-xs text-green-600">Health: 92%</p>
                                    </div>
                                    <span class="bg-green-100 text-green-800 text-xs px-2 py-1 rounded">Active</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="grid grid-cols-2 gap-4">
                        <div class="bg-green-50 p-3 rounded-lg">
                            <h6 class="font-semibold text-green-900">Network Health</h6>
                            <p class="text-sm text-green-700">Average health: 79.2%</p>
                        </div>
                        <div class="bg-yellow-50 p-3 rounded-lg">
                            <h6 class="font-semibold text-yellow-900">Maintenance Alerts</h6>
                            <p class="text-sm text-yellow-700">19 nodes need attention</p>
                        </div>
                    </div>
                </div>
            `);
        }

        function showMeterConnectivityDetails() {
            const currentRegion = getCurrentRegion();
            const regionData = regionalData[currentRegion];

            showModal('Meter Connectivity - Grid Status', `
                <div class="space-y-6">
                    <div class="bg-teal-50 p-4 rounded-lg">
                        <h4 class="font-semibold text-teal-900 mb-2">Connectivity Overview</h4>
                        <p class="text-teal-800 text-lg font-bold">${regionData.meterConnectivity.percentage}% Connected</p>
                        <p class="text-teal-600">${regionData.meterConnectivity.connected.toLocaleString()} of ${regionData.meterConnectivity.total.toLocaleString()} meters on grid</p>
                    </div>

                    <div class="bg-gray-50 p-4 rounded-lg">
                        <h5 class="font-semibold text-gray-900 mb-3">Meter Status by District</h5>
                        <div class="space-y-2 max-h-64 overflow-y-auto">
                            <div class="meter-item bg-white p-3 rounded border">
                                <div class="flex justify-between items-start">
                                    <div>
                                        <h6 class="font-semibold text-gray-900">MTR-KMA-12345</h6>
                                        <p class="text-sm text-gray-600">Adum Commercial District</p>
                                        <p class="text-xs text-gray-500">Kumasi Metropolitan</p>
                                        <p class="text-xs text-blue-600">6.6885°N, -1.6244°W</p>
                                    </div>
                                    <span class="bg-green-100 text-green-800 text-xs px-2 py-1 rounded">On Grid</span>
                                </div>
                            </div>

                            <div class="meter-item bg-white p-3 rounded border">
                                <div class="flex justify-between items-start">
                                    <div>
                                        <h6 class="font-semibold text-gray-900">MTR-OBS-67890</h6>
                                        <p class="text-sm text-gray-600">Obuasi Mining Area</p>
                                        <p class="text-xs text-gray-500">Obuasi Municipal</p>
                                        <p class="text-xs text-blue-600">6.2027°N, -1.2560°W</p>
                                    </div>
                                    <span class="bg-green-100 text-green-800 text-xs px-2 py-1 rounded">On Grid</span>
                                </div>
                            </div>

                            <div class="meter-item bg-white p-3 rounded border">
                                <div class="flex justify-between items-start">
                                    <div>
                                        <h6 class="font-semibold text-gray-900">MTR-EJS-11111</h6>
                                        <p class="text-sm text-gray-600">Ejisu Township</p>
                                        <p class="text-xs text-gray-500">Ejisu-Juaben Municipal</p>
                                        <p class="text-xs text-blue-600">6.7924°N, -1.4311°W</p>
                                    </div>
                                    <span class="bg-red-100 text-red-800 text-xs px-2 py-1 rounded">Offline</span>
                                </div>
                            </div>

                            <div class="meter-item bg-white p-3 rounded border">
                                <div class="flex justify-between items-start">
                                    <div>
                                        <h6 class="font-semibold text-gray-900">MTR-BKW-22222</h6>
                                        <p class="text-sm text-gray-600">Bekwai Market Area</p>
                                        <p class="text-xs text-gray-500">Bekwai Municipal</p>
                                        <p class="text-xs text-blue-600">6.4667°N, -1.5833°W</p>
                                    </div>
                                    <span class="bg-green-100 text-green-800 text-xs px-2 py-1 rounded">On Grid</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="grid grid-cols-3 gap-4">
                        <div class="bg-green-50 p-3 rounded-lg">
                            <h6 class="font-semibold text-green-900">Online</h6>
                            <p class="text-sm text-green-700">${regionData.meterConnectivity.connected.toLocaleString()} meters</p>
                        </div>
                        <div class="bg-red-50 p-3 rounded-lg">
                            <h6 class="font-semibold text-red-900">Offline</h6>
                            <p class="text-sm text-red-700">${(regionData.meterConnectivity.total - regionData.meterConnectivity.connected).toLocaleString()} meters</p>
                        </div>
                        <div class="bg-blue-50 p-3 rounded-lg">
                            <h6 class="font-semibold text-blue-900">Response Time</h6>
                            <p class="text-sm text-blue-700">1.2s average</p>
                        </div>
                    </div>
                </div>
            `);
        }

        function showNetworkCoverageDetails() {
            const currentRegion = getCurrentRegion();
            const regionData = regionalData[currentRegion];

            showModal(`Network Coverage - ${regionData.name}`, `
                <div class="space-y-6">
                    <div class="bg-emerald-50 p-4 rounded-lg">
                        <h4 class="font-semibold text-emerald-900 mb-2">Coverage Overview</h4>
                        <p class="text-emerald-800 text-lg font-bold">${regionData.networkCoverage.overall}% Overall Coverage</p>
                        <p class="text-emerald-600">${regionData.name} network infrastructure status</p>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <div class="bg-blue-50 p-4 rounded-lg">
                            <h5 class="font-semibold text-blue-900 mb-2">Urban Areas</h5>
                            <p class="text-blue-800 text-2xl font-bold">${regionData.networkCoverage.urban}%</p>
                            <p class="text-sm text-blue-600">Metropolitan & Municipal areas</p>
                            <div class="mt-2">
                                <div class="w-full bg-blue-200 rounded-full h-2">
                                    <div class="bg-blue-600 h-2 rounded-full" style="width: ${regionData.networkCoverage.urban}%"></div>
                                </div>
                            </div>
                        </div>

                        <div class="bg-green-50 p-4 rounded-lg">
                            <h5 class="font-semibold text-green-900 mb-2">Peri-Urban</h5>
                            <p class="text-green-800 text-2xl font-bold">${regionData.networkCoverage.periUrban}%</p>
                            <p class="text-sm text-green-600">Suburban & transitional zones</p>
                            <div class="mt-2">
                                <div class="w-full bg-green-200 rounded-full h-2">
                                    <div class="bg-green-600 h-2 rounded-full" style="width: ${regionData.networkCoverage.periUrban}%"></div>
                                </div>
                            </div>
                        </div>

                        <div class="bg-yellow-50 p-4 rounded-lg">
                            <h5 class="font-semibold text-yellow-900 mb-2">Rural Areas</h5>
                            <p class="text-yellow-800 text-2xl font-bold">${regionData.networkCoverage.rural}%</p>
                            <p class="text-sm text-yellow-600">Remote & agricultural areas</p>
                            <div class="mt-2">
                                <div class="w-full bg-yellow-200 rounded-full h-2">
                                    <div class="bg-yellow-600 h-2 rounded-full" style="width: ${regionData.networkCoverage.rural}%"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="bg-gray-50 p-4 rounded-lg">
                        <h5 class="font-semibold text-gray-900 mb-3">Coverage by District</h5>
                        <div class="space-y-3">
                            <div class="flex justify-between items-center">
                                <span class="text-gray-700">Kumasi Metropolitan</span>
                                <div class="flex items-center space-x-2">
                                    <div class="w-24 bg-gray-200 rounded-full h-2">
                                        <div class="bg-green-600 h-2 rounded-full" style="width: 98%"></div>
                                    </div>
                                    <span class="text-sm font-semibold text-gray-900">98%</span>
                                </div>
                            </div>
                            <div class="flex justify-between items-center">
                                <span class="text-gray-700">Obuasi Municipal</span>
                                <div class="flex items-center space-x-2">
                                    <div class="w-24 bg-gray-200 rounded-full h-2">
                                        <div class="bg-green-600 h-2 rounded-full" style="width: 94%"></div>
                                    </div>
                                    <span class="text-sm font-semibold text-gray-900">94%</span>
                                </div>
                            </div>
                            <div class="flex justify-between items-center">
                                <span class="text-gray-700">Ejisu-Juaben Municipal</span>
                                <div class="flex items-center space-x-2">
                                    <div class="w-24 bg-gray-200 rounded-full h-2">
                                        <div class="bg-yellow-600 h-2 rounded-full" style="width: 89%"></div>
                                    </div>
                                    <span class="text-sm font-semibold text-gray-900">89%</span>
                                </div>
                            </div>
                            <div class="flex justify-between items-center">
                                <span class="text-gray-700">Bekwai Municipal</span>
                                <div class="flex items-center space-x-2">
                                    <div class="w-24 bg-gray-200 rounded-full h-2">
                                        <div class="bg-yellow-600 h-2 rounded-full" style="width: 87%"></div>
                                    </div>
                                    <span class="text-sm font-semibold text-gray-900">87%</span>
                                </div>
                            </div>
                            <div class="flex justify-between items-center">
                                <span class="text-gray-700">Rural Communities</span>
                                <div class="flex items-center space-x-2">
                                    <div class="w-24 bg-gray-200 rounded-full h-2">
                                        <div class="bg-red-600 h-2 rounded-full" style="width: 72%"></div>
                                    </div>
                                    <span class="text-sm font-semibold text-gray-900">72%</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="bg-blue-50 p-4 rounded-lg">
                        <h5 class="font-semibold text-blue-900 mb-2">Infrastructure Status</h5>
                        <div class="grid grid-cols-2 gap-4 text-sm">
                            <div>
                                <span class="text-blue-700">Base Stations:</span>
                                <span class="font-semibold text-blue-900">47 active</span>
                            </div>
                            <div>
                                <span class="text-blue-700">Fiber Coverage:</span>
                                <span class="font-semibold text-blue-900">89%</span>
                            </div>
                            <div>
                                <span class="text-blue-700">LoRa Gateways:</span>
                                <span class="font-semibold text-blue-900">23 operational</span>
                            </div>
                            <div>
                                <span class="text-blue-700">Signal Strength:</span>
                                <span class="font-semibold text-blue-900">-67 dBm avg</span>
                            </div>
                        </div>
                    </div>
                </div>
            `);
        }

        // LoRaWAN Infrastructure Functions
        function showAllLoRaWANDetails() {
            const currentRegion = getCurrentRegion();
            const regionData = regionalData[currentRegion];

            showModal(`LoRaWAN Infrastructure Overview - ${regionData.name}`, `
                <div class="space-y-6">
                    <div class="bg-blue-50 p-4 rounded-lg">
                        <h4 class="font-semibold text-blue-900 mb-2">Infrastructure Summary</h4>
                        <div class="grid grid-cols-2 md:grid-cols-4 gap-4 text-sm">
                            <div class="text-center">
                                <p class="text-blue-800 text-lg font-bold">${regionData.lorawanInfrastructure.baseStations.total}</p>
                                <p class="text-blue-600">Base Stations</p>
                            </div>
                            <div class="text-center">
                                <p class="text-green-800 text-lg font-bold">${regionData.lorawanInfrastructure.smartMeters.toLocaleString()}</p>
                                <p class="text-green-600">Smart Meters</p>
                            </div>
                            <div class="text-center">
                                <p class="text-purple-800 text-lg font-bold">${regionData.lorawanInfrastructure.monitoredTransformers}</p>
                                <p class="text-purple-600">Transformers</p>
                            </div>
                            <div class="text-center">
                                <p class="text-orange-800 text-lg font-bold">${regionData.lorawanInfrastructure.telecomTowers}</p>
                                <p class="text-orange-600">Telecom Towers</p>
                            </div>
                        </div>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div class="bg-gray-50 p-4 rounded-lg">
                            <h5 class="font-semibold text-gray-900 mb-2">Network Performance</h5>
                            <ul class="text-sm text-gray-700 space-y-1">
                                <li>• Data Transmission Rate: 99.2%</li>
                                <li>• Average Latency: 45ms</li>
                                <li>• Network Uptime: 99.8%</li>
                                <li>• Coverage Area: ${regionData.networkCoverage.overall}%</li>
                            </ul>
                        </div>

                        <div class="bg-green-50 p-4 rounded-lg">
                            <h5 class="font-semibold text-green-900 mb-2">Operational Status</h5>
                            <ul class="text-sm text-green-700 space-y-1">
                                <li>• Active Base Stations: ${regionData.lorawanInfrastructure.baseStations.active}</li>
                                <li>• Maintenance Required: ${regionData.lorawanInfrastructure.baseStations.maintenance}</li>
                                <li>• Signal Quality: Excellent</li>
                                <li>• Power Consumption: Optimized</li>
                            </ul>
                        </div>
                    </div>
                </div>
            `);
        }

        function showBaseStationsDetails() {
            const currentRegion = getCurrentRegion();
            const regionData = regionalData[currentRegion];

            showModal('LoRaWAN Base Stations - Network Infrastructure', `
                <div class="space-y-6">
                    <div class="bg-blue-50 p-4 rounded-lg">
                        <h4 class="font-semibold text-blue-900 mb-2">Base Stations Overview</h4>
                        <p class="text-blue-800 text-lg font-bold">${regionData.lorawanInfrastructure.baseStations.total} Total Stations</p>
                        <p class="text-blue-600">${regionData.lorawanInfrastructure.baseStations.active} Active • ${regionData.lorawanInfrastructure.baseStations.maintenance} Maintenance</p>
                    </div>

                    <div class="bg-gray-50 p-4 rounded-lg">
                        <h5 class="font-semibold text-gray-900 mb-3">Station Details</h5>
                        <div class="space-y-3 max-h-64 overflow-y-auto">
                            <div class="station-item bg-white p-3 rounded border">
                                <div class="flex justify-between items-start mb-2">
                                    <div>
                                        <h6 class="font-semibold text-gray-900">BS-KMA-001</h6>
                                        <p class="text-sm text-gray-600">Kumasi Central Base Station</p>
                                        <p class="text-xs text-blue-600">6.6885°N, -1.6244°W</p>
                                        <p class="text-xs text-green-600">Health: 96%</p>
                                        <p class="text-xs text-gray-500">Last Maintenance: 2024-07-15</p>
                                    </div>
                                    <span class="bg-green-100 text-green-800 text-xs px-2 py-1 rounded">Active</span>
                                </div>
                                <div class="flex space-x-2">
                                    <button onclick="redirectToMap('6.6885,-1.6244')" class="bg-blue-500 hover:bg-blue-600 text-white text-xs px-3 py-1 rounded">View on Map</button>
                                    <button onclick="showContractors('BS-KMA-001')" class="bg-gray-500 hover:bg-gray-600 text-white text-xs px-3 py-1 rounded">View Contractors</button>
                                </div>
                            </div>

                            <div class="station-item bg-white p-3 rounded border">
                                <div class="flex justify-between items-start mb-2">
                                    <div>
                                        <h6 class="font-semibold text-gray-900">BS-OBS-002</h6>
                                        <p class="text-sm text-gray-600">Obuasi District Station</p>
                                        <p class="text-xs text-blue-600">6.2027°N, -1.2560°W</p>
                                        <p class="text-xs text-yellow-600">Health: 78%</p>
                                        <p class="text-xs text-gray-500">Last Maintenance: 2024-06-20</p>
                                    </div>
                                    <span class="bg-yellow-100 text-yellow-800 text-xs px-2 py-1 rounded">Maintenance Needed</span>
                                </div>
                                <div class="flex space-x-2">
                                    <button onclick="redirectToMap('6.2027,-1.2560')" class="bg-blue-500 hover:bg-blue-600 text-white text-xs px-3 py-1 rounded">View on Map</button>
                                    <button onclick="showContractors('BS-OBS-002')" class="bg-gray-500 hover:bg-gray-600 text-white text-xs px-3 py-1 rounded">View Contractors</button>
                                </div>
                            </div>

                            <div class="station-item bg-white p-3 rounded border">
                                <div class="flex justify-between items-start mb-2">
                                    <div>
                                        <h6 class="font-semibold text-gray-900">BS-EJS-003</h6>
                                        <p class="text-sm text-gray-600">Ejisu-Juaben Station</p>
                                        <p class="text-xs text-blue-600">6.7924°N, -1.4311°W</p>
                                        <p class="text-xs text-green-600">Health: 92%</p>
                                        <p class="text-xs text-gray-500">Last Maintenance: 2024-07-10</p>
                                    </div>
                                    <span class="bg-green-100 text-green-800 text-xs px-2 py-1 rounded">Active</span>
                                </div>
                                <div class="flex space-x-2">
                                    <button onclick="redirectToMap('6.7924,-1.4311')" class="bg-blue-500 hover:bg-blue-600 text-white text-xs px-3 py-1 rounded">View on Map</button>
                                    <button onclick="showContractors('BS-EJS-003')" class="bg-gray-500 hover:bg-gray-600 text-white text-xs px-3 py-1 rounded">View Contractors</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="grid grid-cols-2 gap-4">
                        <div class="bg-green-50 p-3 rounded-lg">
                            <h6 class="font-semibold text-green-900">Network Coverage</h6>
                            <p class="text-sm text-green-700">15km radius per station</p>
                        </div>
                        <div class="bg-blue-50 p-3 rounded-lg">
                            <h6 class="font-semibold text-blue-900">Data Capacity</h6>
                            <p class="text-sm text-blue-700">10,000 devices per station</p>
                        </div>
                    </div>
                </div>
            `);
        }

        function redirectToMap(coordinates) {
            // Close the modal first
            closeModal();

            // Extract latitude and longitude
            const [lat, lng] = coordinates.split(',');

            // Redirect to smart-grid.html with coordinates
            window.location.href = `smart-grid.html?lat=${lat}&lng=${lng}&zoom=15`;
        }

        function showSmartMetersDetails() {
            const currentRegion = getCurrentRegion();
            const regionData = regionalData[currentRegion];

            showModal('Smart Meters - LoRa-enabled Monitoring', `
                <div class="space-y-6">
                    <div class="bg-green-50 p-4 rounded-lg">
                        <h4 class="font-semibold text-green-900 mb-2">Smart Meters Overview</h4>
                        <p class="text-green-800 text-lg font-bold">${regionData.lorawanInfrastructure.smartMeters.toLocaleString()} LoRa-enabled Meters</p>
                        <p class="text-green-600">Real-time energy monitoring and data collection</p>
                    </div>

                    <div class="bg-gray-50 p-4 rounded-lg">
                        <h5 class="font-semibold text-gray-900 mb-3">Meter Distribution by District</h5>
                        <div class="space-y-3">
                            <div class="flex justify-between items-center">
                                <span class="text-gray-700">Kumasi Metropolitan</span>
                                <span class="font-semibold text-gray-900">${Math.round(regionData.lorawanInfrastructure.smartMeters * 0.35).toLocaleString()} meters</span>
                            </div>
                            <div class="flex justify-between items-center">
                                <span class="text-gray-700">Obuasi Municipal</span>
                                <span class="font-semibold text-gray-900">${Math.round(regionData.lorawanInfrastructure.smartMeters * 0.18).toLocaleString()} meters</span>
                            </div>
                            <div class="flex justify-between items-center">
                                <span class="text-gray-700">Ejisu-Juaben Municipal</span>
                                <span class="font-semibold text-gray-900">${Math.round(regionData.lorawanInfrastructure.smartMeters * 0.15).toLocaleString()} meters</span>
                            </div>
                            <div class="flex justify-between items-center">
                                <span class="text-gray-700">Other Districts</span>
                                <span class="font-semibold text-gray-900">${Math.round(regionData.lorawanInfrastructure.smartMeters * 0.32).toLocaleString()} meters</span>
                            </div>
                        </div>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div class="bg-blue-50 p-4 rounded-lg">
                            <h5 class="font-semibold text-blue-900 mb-2">Technical Specifications</h5>
                            <ul class="text-sm text-blue-700 space-y-1">
                                <li>• LoRaWAN Class A/C devices</li>
                                <li>• 15-minute reading intervals</li>
                                <li>• 10-year battery life</li>
                                <li>• IP67 weatherproof rating</li>
                                <li>• AES-128 encryption</li>
                            </ul>
                        </div>

                        <div class="bg-yellow-50 p-4 rounded-lg">
                            <h5 class="font-semibold text-yellow-900 mb-2">Performance Metrics</h5>
                            <ul class="text-sm text-yellow-700 space-y-1">
                                <li>• Data Success Rate: 99.1%</li>
                                <li>• Average Battery Level: 87%</li>
                                <li>• Signal Strength: -75 dBm avg</li>
                                <li>• Firmware Version: v2.1.3</li>
                                <li>• Last Update: 2024-07-20</li>
                            </ul>
                        </div>
                    </div>
                </div>
            `);
        }

        function showMonitoredTransformersDetails() {
            const currentRegion = getCurrentRegion();
            const regionData = regionalData[currentRegion];

            showModal('Monitored Transformers - LoRa Sensor Network', `
                <div class="space-y-6">
                    <div class="bg-purple-50 p-4 rounded-lg">
                        <h4 class="font-semibold text-purple-900 mb-2">Transformer Monitoring</h4>
                        <p class="text-purple-800 text-lg font-bold">${regionData.lorawanInfrastructure.monitoredTransformers} Transformers with LoRa Sensors</p>
                        <p class="text-purple-600">Real-time temperature, load, and health monitoring</p>
                    </div>

                    <div class="bg-gray-50 p-4 rounded-lg">
                        <h5 class="font-semibold text-gray-900 mb-3">Monitored Transformer List</h5>
                        <div class="space-y-2 max-h-64 overflow-y-auto">
                            <div class="transformer-item bg-white p-3 rounded border">
                                <div class="flex justify-between items-start mb-2">
                                    <div>
                                        <h6 class="font-semibold text-gray-900">TXF-KMA-001-LoRa</h6>
                                        <p class="text-sm text-gray-600">Kumasi Central Substation</p>
                                        <p class="text-xs text-blue-600">6.6885°N, -1.6244°W</p>
                                        <p class="text-xs text-green-600">Health: 94% | Temp: 45°C</p>
                                        <p class="text-xs text-gray-500">Last Maintenance: 2024-07-15</p>
                                    </div>
                                    <span class="bg-green-100 text-green-800 text-xs px-2 py-1 rounded">Optimal</span>
                                </div>
                                <div class="flex space-x-2">
                                    <button onclick="redirectToMap('6.6885,-1.6244')" class="bg-blue-500 hover:bg-blue-600 text-white text-xs px-3 py-1 rounded">View on Map</button>
                                    <button onclick="showContractors('TXF-KMA-001')" class="bg-gray-500 hover:bg-gray-600 text-white text-xs px-3 py-1 rounded">View Contractors</button>
                                </div>
                            </div>

                            <div class="transformer-item bg-white p-3 rounded border">
                                <div class="flex justify-between items-start mb-2">
                                    <div>
                                        <h6 class="font-semibold text-gray-900">TXF-OBS-002-LoRa</h6>
                                        <p class="text-sm text-gray-600">Obuasi Main Substation</p>
                                        <p class="text-xs text-blue-600">6.2027°N, -1.2560°W</p>
                                        <p class="text-xs text-yellow-600">Health: 76% | Temp: 52°C</p>
                                        <p class="text-xs text-gray-500">Last Maintenance: 2024-06-20</p>
                                    </div>
                                    <span class="bg-yellow-100 text-yellow-800 text-xs px-2 py-1 rounded">Attention</span>
                                </div>
                                <div class="flex space-x-2">
                                    <button onclick="redirectToMap('6.2027,-1.2560')" class="bg-blue-500 hover:bg-blue-600 text-white text-xs px-3 py-1 rounded">View on Map</button>
                                    <button onclick="showContractors('TXF-OBS-002')" class="bg-gray-500 hover:bg-gray-600 text-white text-xs px-3 py-1 rounded">View Contractors</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="grid grid-cols-3 gap-4">
                        <div class="bg-green-50 p-3 rounded-lg">
                            <h6 class="font-semibold text-green-900">Optimal</h6>
                            <p class="text-sm text-green-700">${Math.round(regionData.lorawanInfrastructure.monitoredTransformers * 0.7)} units</p>
                        </div>
                        <div class="bg-yellow-50 p-3 rounded-lg">
                            <h6 class="font-semibold text-yellow-900">Attention</h6>
                            <p class="text-sm text-yellow-700">${Math.round(regionData.lorawanInfrastructure.monitoredTransformers * 0.2)} units</p>
                        </div>
                        <div class="bg-red-50 p-3 rounded-lg">
                            <h6 class="font-semibold text-red-900">Critical</h6>
                            <p class="text-sm text-red-700">${Math.round(regionData.lorawanInfrastructure.monitoredTransformers * 0.1)} units</p>
                        </div>
                    </div>
                </div>
            `);
        }

        function showTelecomTowersDetails() {
            const currentRegion = getCurrentRegion();
            const regionData = regionalData[currentRegion];

            showModal('Telecom Towers - Network Infrastructure', `
                <div class="space-y-6">
                    <div class="bg-orange-50 p-4 rounded-lg">
                        <h4 class="font-semibold text-orange-900 mb-2">Telecom Infrastructure</h4>
                        <p class="text-orange-800 text-lg font-bold">${regionData.lorawanInfrastructure.telecomTowers} Telecom Towers</p>
                        <p class="text-orange-600">MTN • Vodafone • AirtelTigo network support</p>
                    </div>

                    <div class="bg-gray-50 p-4 rounded-lg">
                        <h5 class="font-semibold text-gray-900 mb-3">Tower Locations</h5>
                        <div class="space-y-2 max-h-64 overflow-y-auto">
                            <div class="tower-item bg-white p-3 rounded border">
                                <div class="flex justify-between items-start mb-2">
                                    <div>
                                        <h6 class="font-semibold text-gray-900">TWR-MTN-KMA-001</h6>
                                        <p class="text-sm text-gray-600">Kumasi Central - MTN Tower</p>
                                        <p class="text-xs text-blue-600">6.6885°N, -1.6244°W</p>
                                        <p class="text-xs text-green-600">Health: 98% | Signal: -45 dBm</p>
                                        <p class="text-xs text-gray-500">Last Maintenance: 2024-07-10</p>
                                    </div>
                                    <span class="bg-yellow-100 text-yellow-800 text-xs px-2 py-1 rounded">MTN</span>
                                </div>
                                <div class="flex space-x-2">
                                    <button onclick="redirectToMap('6.6885,-1.6244')" class="bg-blue-500 hover:bg-blue-600 text-white text-xs px-3 py-1 rounded">View on Map</button>
                                    <button onclick="showContractors('TWR-MTN-KMA-001')" class="bg-gray-500 hover:bg-gray-600 text-white text-xs px-3 py-1 rounded">View Contractors</button>
                                </div>
                            </div>

                            <div class="tower-item bg-white p-3 rounded border">
                                <div class="flex justify-between items-start mb-2">
                                    <div>
                                        <h6 class="font-semibold text-gray-900">TWR-VOD-OBS-002</h6>
                                        <p class="text-sm text-gray-600">Obuasi District - Vodafone Tower</p>
                                        <p class="text-xs text-blue-600">6.2027°N, -1.2560°W</p>
                                        <p class="text-xs text-green-600">Health: 95% | Signal: -52 dBm</p>
                                        <p class="text-xs text-gray-500">Last Maintenance: 2024-06-25</p>
                                    </div>
                                    <span class="bg-red-100 text-red-800 text-xs px-2 py-1 rounded">Vodafone</span>
                                </div>
                                <div class="flex space-x-2">
                                    <button onclick="redirectToMap('6.2027,-1.2560')" class="bg-blue-500 hover:bg-blue-600 text-white text-xs px-3 py-1 rounded">View on Map</button>
                                    <button onclick="showContractors('TWR-VOD-OBS-002')" class="bg-gray-500 hover:bg-gray-600 text-white text-xs px-3 py-1 rounded">View Contractors</button>
                                </div>
                            </div>

                            <div class="tower-item bg-white p-3 rounded border">
                                <div class="flex justify-between items-start mb-2">
                                    <div>
                                        <h6 class="font-semibold text-gray-900">TWR-ATL-EJS-003</h6>
                                        <p class="text-sm text-gray-600">Ejisu-Juaben - AirtelTigo Tower</p>
                                        <p class="text-xs text-blue-600">6.7924°N, -1.4311°W</p>
                                        <p class="text-xs text-green-600">Health: 91% | Signal: -58 dBm</p>
                                        <p class="text-xs text-gray-500">Last Maintenance: 2024-07-05</p>
                                    </div>
                                    <span class="bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded">AirtelTigo</span>
                                </div>
                                <div class="flex space-x-2">
                                    <button onclick="redirectToMap('6.7924,-1.4311')" class="bg-blue-500 hover:bg-blue-600 text-white text-xs px-3 py-1 rounded">View on Map</button>
                                    <button onclick="showContractors('TWR-ATL-EJS-003')" class="bg-gray-500 hover:bg-gray-600 text-white text-xs px-3 py-1 rounded">View Contractors</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="grid grid-cols-3 gap-4">
                        <div class="bg-yellow-50 p-3 rounded-lg">
                            <h6 class="font-semibold text-yellow-900">MTN Towers</h6>
                            <p class="text-sm text-yellow-700">${Math.round(regionData.lorawanInfrastructure.telecomTowers * 0.4)} towers</p>
                        </div>
                        <div class="bg-red-50 p-3 rounded-lg">
                            <h6 class="font-semibold text-red-900">Vodafone Towers</h6>
                            <p class="text-sm text-red-700">${Math.round(regionData.lorawanInfrastructure.telecomTowers * 0.35)} towers</p>
                        </div>
                        <div class="bg-blue-50 p-3 rounded-lg">
                            <h6 class="font-semibold text-blue-900">AirtelTigo Towers</h6>
                            <p class="text-sm text-blue-700">${Math.round(regionData.lorawanInfrastructure.telecomTowers * 0.25)} towers</p>
                        </div>
                    </div>
                </div>
            `);
        }

        function showContractors(equipmentId) {
            // Sample contractor data - this would normally come from a database
            const contractorData = {
                'BS-KMA-001': {
                    team: 'Alpha Grid Solutions',
                    members: ['Kwame Asante (Lead Technician)', 'Ama Osei (Network Engineer)', 'Kofi Mensah (Field Specialist)'],
                    lastService: '2024-07-15',
                    nextScheduled: '2024-10-15'
                },
                'BS-OBS-002': {
                    team: 'Beta Infrastructure Team',
                    members: ['Akosua Frimpong (Senior Engineer)', 'Yaw Boateng (Maintenance Tech)', 'Efua Darko (Quality Assurance)'],
                    lastService: '2024-06-20',
                    nextScheduled: '2024-09-20'
                },
                'TXF-KMA-001': {
                    team: 'PowerGrid Maintenance Crew',
                    members: ['Samuel Oppong (Electrical Engineer)', 'Grace Adjei (Safety Officer)', 'Kwaku Owusu (Transformer Specialist)'],
                    lastService: '2024-07-15',
                    nextScheduled: '2024-10-15'
                },
                'TWR-MTN-KMA-001': {
                    team: 'MTN Technical Services',
                    members: ['Joseph Antwi (Tower Engineer)', 'Mary Amoah (RF Specialist)', 'Peter Gyasi (Maintenance Lead)'],
                    lastService: '2024-07-10',
                    nextScheduled: '2024-10-10'
                }
            };

            const contractor = contractorData[equipmentId] || {
                team: 'General Maintenance Team',
                members: ['John Doe (Lead)', 'Jane Smith (Technician)', 'Bob Johnson (Assistant)'],
                lastService: '2024-07-01',
                nextScheduled: '2024-10-01'
            };

            showModal(`Contractor Information - ${equipmentId}`, `
                <div class="space-y-6">
                    <div class="bg-blue-50 p-4 rounded-lg">
                        <h4 class="font-semibold text-blue-900 mb-2">Assigned Team</h4>
                        <p class="text-blue-800 text-lg font-bold">${contractor.team}</p>
                        <p class="text-blue-600">Responsible for maintenance and monitoring</p>
                    </div>

                    <div class="bg-gray-50 p-4 rounded-lg">
                        <h5 class="font-semibold text-gray-900 mb-3">Team Members</h5>
                        <ul class="space-y-2">
                            ${contractor.members.map(member => `
                                <li class="flex items-center">
                                    <div class="w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center mr-3">
                                        <svg class="w-4 h-4 text-blue-600" fill="currentColor" viewBox="0 0 20 20">
                                            <path fill-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" clip-rule="evenodd"></path>
                                        </svg>
                                    </div>
                                    <span class="text-gray-700">${member}</span>
                                </li>
                            `).join('')}
                        </ul>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div class="bg-green-50 p-4 rounded-lg">
                            <h5 class="font-semibold text-green-900 mb-2">Service History</h5>
                            <p class="text-sm text-green-700">Last Service: ${contractor.lastService}</p>
                            <p class="text-sm text-green-700">Status: Completed Successfully</p>
                            <p class="text-sm text-green-700">Duration: 4 hours</p>
                        </div>

                        <div class="bg-yellow-50 p-4 rounded-lg">
                            <h5 class="font-semibold text-yellow-900 mb-2">Upcoming Schedule</h5>
                            <p class="text-sm text-yellow-700">Next Service: ${contractor.nextScheduled}</p>
                            <p class="text-sm text-yellow-700">Type: Routine Maintenance</p>
                            <p class="text-sm text-yellow-700">Estimated Duration: 3 hours</p>
                        </div>
                    </div>

                    <div class="bg-purple-50 p-4 rounded-lg">
                        <h5 class="font-semibold text-purple-900 mb-2">Contact Information</h5>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm">
                            <div>
                                <p class="text-purple-700">Emergency Contact: +233 24 123 4567</p>
                                <p class="text-purple-700">Email: ${contractor.team.toLowerCase().replace(/\s+/g, '')}@powergrid.gh</p>
                            </div>
                            <div>
                                <p class="text-purple-700">Office Hours: 8:00 AM - 6:00 PM</p>
                                <p class="text-purple-700">24/7 Emergency Support Available</p>
                            </div>
                        </div>
                    </div>
                </div>
            `);
        }

        function getCurrentRegion() {
            // This would normally get the currently selected region
            // For now, return 'ashanti' as default
            return 'ashanti';
        }

        // Function to update display values based on selected region
        function updateRegionalDisplay(regionKey) {
            const regionData = regionalData[regionKey];
            if (!regionData) return;

            // Update existing metrics
            document.getElementById('total-energy-value').textContent = regionData.totalEnergy;
            document.getElementById('transmission-efficiency').textContent = regionData.transmissionEfficiency;
            document.getElementById('active-transformers').textContent = regionData.activeTransformers;
            document.getElementById('energy-theft').textContent = regionData.energyTheft;

            // Update new metrics
            document.getElementById('smart-nodes-percentage').textContent = regionData.smartNodes.percentage;
            document.getElementById('smart-nodes-status').textContent = `${regionData.smartNodes.active} of ${regionData.smartNodes.total} nodes active`;

            document.getElementById('meter-connectivity-percentage').textContent = regionData.meterConnectivity.percentage;
            document.getElementById('meter-connectivity-status').textContent = `${regionData.meterConnectivity.connected.toLocaleString()} of ${regionData.meterConnectivity.total.toLocaleString()} meters connected`;

            document.getElementById('network-coverage-percentage').textContent = regionData.networkCoverage.overall;
            document.getElementById('network-coverage-region').textContent = regionData.name;
            document.getElementById('urban-coverage').textContent = `${regionData.networkCoverage.urban}%`;
            document.getElementById('rural-coverage').textContent = `${regionData.networkCoverage.rural}%`;
            document.getElementById('peri-urban-coverage').textContent = `${regionData.networkCoverage.periUrban}%`;

            // Update LoRaWAN infrastructure metrics
            document.getElementById('lorawan-base-stations').textContent = regionData.lorawanInfrastructure.baseStations.total;
            document.getElementById('base-stations-status').textContent = `${regionData.lorawanInfrastructure.baseStations.active} Active • ${regionData.lorawanInfrastructure.baseStations.maintenance} Maintenance`;
            document.getElementById('smart-meters-count').textContent = regionData.lorawanInfrastructure.smartMeters.toLocaleString();
            document.getElementById('monitored-transformers').textContent = regionData.lorawanInfrastructure.monitoredTransformers;
            document.getElementById('telecom-towers').textContent = regionData.lorawanInfrastructure.telecomTowers;
        }

        // Initialize with default region on page load
        document.addEventListener('DOMContentLoaded', function() {
            updateRegionalDisplay('ashanti');
        });

        // Chart interaction functions
        function showRegionalChartDetails(month, value) {
            showModal(`Regional Performance - ${month} Details`, `
                <div class="space-y-6">
                    <div class="bg-blue-50 p-4 rounded-lg">
                        <h4 class="font-semibold text-blue-900 mb-2">${month} Performance Summary</h4>
                        <p class="text-blue-800 text-lg font-bold">${value} MW Energy Output</p>
                        <p class="text-blue-600">Monthly regional energy generation data</p>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div class="bg-gray-50 p-4 rounded-lg">
                            <h5 class="font-semibold text-gray-900 mb-2">District Breakdown</h5>
                            <ul class="text-sm text-gray-700 space-y-1">
                                <li>• Kumasi Metro: ${Math.round(value * 0.35)} MW (35%)</li>
                                <li>• Obuasi Municipal: ${Math.round(value * 0.18)} MW (18%)</li>
                                <li>• Ejisu-Juaben: ${Math.round(value * 0.15)} MW (15%)</li>
                                <li>• Asante Akim: ${Math.round(value * 0.12)} MW (12%)</li>
                                <li>• Other Districts: ${Math.round(value * 0.20)} MW (20%)</li>
                            </ul>
                        </div>

                        <div class="bg-green-50 p-4 rounded-lg">
                            <h5 class="font-semibold text-green-900 mb-2">Performance Metrics</h5>
                            <ul class="text-sm text-green-700 space-y-1">
                                <li>• Peak Demand: ${Math.round(value * 1.2)} MW</li>
                                <li>• Average Load: ${Math.round(value * 0.85)} MW</li>
                                <li>• Load Factor: ${Math.round(85 + Math.random() * 10)}%</li>
                                <li>• Reliability: ${Math.round(95 + Math.random() * 4)}%</li>
                                <li>• Grid Efficiency: ${Math.round(92 + Math.random() * 6)}%</li>
                            </ul>
                        </div>
                    </div>

                    <div class="bg-yellow-50 p-4 rounded-lg">
                        <h5 class="font-semibold text-yellow-900 mb-2">Monthly Trends</h5>
                        <p class="text-sm text-yellow-700">
                            ${month} showed ${value > 1500 ? 'strong' : value > 1200 ? 'moderate' : 'low'} energy output
                            compared to regional averages. Key factors include seasonal demand patterns,
                            industrial activity levels, and grid maintenance schedules.
                        </p>
                    </div>
                </div>
            `);
        }

        function showTransmissionChartDetails(time, value) {
            showModal(`Power Transmission - ${time} Details`, `
                <div class="space-y-6">
                    <div class="bg-green-50 p-4 rounded-lg">
                        <h4 class="font-semibold text-green-900 mb-2">${time} Transmission Data</h4>
                        <p class="text-green-800 text-lg font-bold">${value} kW Power Flow</p>
                        <p class="text-green-600">Real-time transmission monitoring</p>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div class="bg-gray-50 p-4 rounded-lg">
                            <h5 class="font-semibold text-gray-900 mb-2">Transmission Lines</h5>
                            <ul class="text-sm text-gray-700 space-y-1">
                                <li>• 330kV Main Line: ${Math.round(value * 0.45)} kW</li>
                                <li>• 161kV Secondary: ${Math.round(value * 0.25)} kW</li>
                                <li>• 69kV Distribution: ${Math.round(value * 0.20)} kW</li>
                                <li>• 34.5kV Local: ${Math.round(value * 0.10)} kW</li>
                            </ul>
                        </div>

                        <div class="bg-blue-50 p-4 rounded-lg">
                            <h5 class="font-semibold text-blue-900 mb-2">System Status</h5>
                            <ul class="text-sm text-blue-700 space-y-1">
                                <li>• Voltage Stability: ${Math.round(95 + Math.random() * 4)}%</li>
                                <li>• Frequency: ${(50 + (Math.random() - 0.5) * 0.2).toFixed(2)} Hz</li>
                                <li>• Power Factor: ${(0.85 + Math.random() * 0.1).toFixed(2)}</li>
                                <li>• Line Loading: ${Math.round(60 + Math.random() * 25)}%</li>
                            </ul>
                        </div>
                    </div>

                    <div class="bg-purple-50 p-4 rounded-lg">
                        <h5 class="font-semibold text-purple-900 mb-2">Time Period Analysis</h5>
                        <p class="text-sm text-purple-700">
                            ${time} represents ${
                                time === '12:00' || time === '16:00' ? 'peak demand hours' :
                                time === '00:00' || time === '04:00' ? 'low demand hours' :
                                'moderate demand hours'
                            } in the daily load cycle.
                            Current transmission efficiency is optimal for this time period.
                        </p>
                    </div>
                </div>
            `);
        }
    </script>

            </div>
    </script>
</body>
</html>
